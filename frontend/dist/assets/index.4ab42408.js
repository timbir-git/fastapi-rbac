import{z as C,e as D,H as Q,a1 as te,s as de,I as ae,r as g,c as b,R as ce,ad as re,n as x,W as q,G as O,D as le,Y as Z,m as M,J as z,ag as ue,$ as se,a0 as fe,bm as ve,bC as ye,bD as he}from"./index.851d8163.js";import{r as pe,T as Ke,t as xe,f as ee,g as ke,c as me,h as be,V as Ne,i as Ee}from"./iconUtil.8455fcc7.js";import{w as _e}from"./useFlexGapSupport.66243b53.js";var ne=4;function ge(t){var e,u=t.dropPosition,l=t.dropLevelOffset,o=t.prefixCls,d=t.indent,h=t.direction,p=h===void 0?"ltr":h,c=p==="ltr"?"left":"right",N=p==="ltr"?"right":"left",s=(e={},C(e,c,"".concat(-l*d+ne,"px")),C(e,N,0),e);switch(u){case-1:s.top="".concat(-3,"px");break;case 1:s.bottom="".concat(-3,"px");break;default:s.bottom="".concat(-3,"px"),s[c]="".concat(d+ne,"px");break}return D("div",{style:s,class:"".concat(o,"-drop-indicator")},null)}var oe=function(){var e=xe();return x(x({},e),{showLine:{type:[Boolean,Object],default:void 0},multiple:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandParent:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},checkedKeys:{type:[Array,Object]},defaultCheckedKeys:{type:Array},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},selectable:{type:Boolean,default:void 0},loadedKeys:{type:Array},draggable:{type:Boolean,default:void 0},showIcon:{type:Boolean,default:void 0},icon:{type:Function},switcherIcon:Z.any,prefixCls:String,replaceFields:{type:Object},blockNode:{type:Boolean,default:void 0},openAnimation:Z.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":Function,"onUpdate:checkedKeys":Function,"onUpdate:expandedKeys":Function})};const L=Q({name:"ATree",inheritAttrs:!1,props:te(oe(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,u){var l=u.attrs,o=u.expose,d=u.emit,h=u.slots;de(!(e.treeData===void 0&&h.default),"`children` of Tree is deprecated. Please use `treeData` instead.");var p=ae("tree",e),c=p.prefixCls,N=p.direction,s=p.virtual,f=g(),U=function(K){var y;(y=f.value)===null||y===void 0||y.scrollTo(K)};o({treeRef:f,onNodeExpand:function(){var K,y;(y=f.value)===null||y===void 0||(K=y).onNodeExpand.apply(K,arguments)},scrollTo:U,selectedKeys:b(function(){var a;return(a=f.value)===null||a===void 0?void 0:a.selectedKeys}),checkedKeys:b(function(){var a;return(a=f.value)===null||a===void 0?void 0:a.checkedKeys}),halfCheckedKeys:b(function(){var a;return(a=f.value)===null||a===void 0?void 0:a.halfCheckedKeys}),loadedKeys:b(function(){var a;return(a=f.value)===null||a===void 0?void 0:a.loadedKeys}),loadingKeys:b(function(){var a;return(a=f.value)===null||a===void 0?void 0:a.loadingKeys}),expandedKeys:b(function(){var a;return(a=f.value)===null||a===void 0?void 0:a.expandedKeys})}),ce(function(){re(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});var A=function(K,y){d("update:checkedKeys",K),d("check",K,y)},w=function(K,y){d("update:expandedKeys",K),d("expand",K,y)},H=function(K,y){d("update:selectedKeys",K),d("select",K,y)};return function(){var a,K=e.showIcon,y=e.showLine,B=e.switcherIcon,_=B===void 0?h.switcherIcon:B,F=e.icon,R=F===void 0?h.icon:F,$=e.blockNode,S=e.checkable,j=e.selectable,n=e.fieldNames,i=n===void 0?e.replaceFields:n,r=e.motion,v=r===void 0?e.openAnimation:r,T=e.itemHeight,k=T===void 0?28:T,P=e.onDoubleclick,I=e.onDblclick,V=x(x(x({},l),_e(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{showLine:Boolean(y),dropIndicatorRender:ge,fieldNames:i,icon:R,itemHeight:k}),W=h.default?q(h.default()):void 0;return D(Ke,O(O({},V),{},{virtual:s.value,motion:v,ref:f,prefixCls:c.value,class:le((a={},C(a,"".concat(c.value,"-icon-hide"),!K),C(a,"".concat(c.value,"-block-node"),$),C(a,"".concat(c.value,"-unselectable"),!j),C(a,"".concat(c.value,"-rtl"),N.value==="rtl"),a),l.class),direction:N.value,checkable:S,selectable:j,switcherIcon:function(ie){return pe(c.value,_,y,ie)},onCheck:A,onExpand:w,onSelect:H,onDblclick:I||P,children:W}),x(x({},h),{checkable:function(){return D("span",{class:"".concat(c.value,"-checkbox-inner")},null)}}))}}});var E;(function(t){t[t.None=0]="None",t[t.Start=1]="Start",t[t.End=2]="End"})(E||(E={}));function X(t,e,u){function l(o){var d=o[e.key],h=o[e.children];u(d,o)!==!1&&X(h||[],e,u)}t.forEach(l)}function Ce(t){var e=t.treeData,u=t.expandedKeys,l=t.startKey,o=t.endKey,d=t.fieldNames,h=d===void 0?{title:"title",key:"key",children:"children"}:d,p=[],c=E.None;if(l&&l===o)return[l];if(!l||!o)return[];function N(s){return s===l||s===o}return X(e,h,function(s){if(c===E.End)return!1;if(N(s)){if(p.push(s),c===E.None)c=E.Start;else if(c===E.Start)return c=E.End,!1}else c===E.Start&&p.push(s);return u.indexOf(s)!==-1}),p}function G(t,e,u){var l=M(e),o=[];return X(t,u,function(d,h){var p=l.indexOf(d);return p!==-1&&(o.push(h),l.splice(p,1)),!!l.length}),o}var De=globalThis&&globalThis.__rest||function(t,e){var u={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&e.indexOf(l)<0&&(u[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(t);o<l.length;o++)e.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(t,l[o])&&(u[l[o]]=t[l[o]]);return u},we=function(){return x(x({},oe()),{expandAction:{type:[Boolean,String]}})};function Te(t){var e=t.isLeaf,u=t.expanded;return e?D(ve,null,null):u?D(ye,null,null):D(he,null,null)}const J=Q({name:"ADirectoryTree",inheritAttrs:!1,props:te(we(),{showIcon:!0,expandAction:"click"}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,u){var l=u.attrs,o=u.slots,d=u.emit,h=u.expose,p,c=g(e.treeData||ee(q((p=o.default)===null||p===void 0?void 0:p.call(o))));z(function(){return e.treeData},function(){c.value=e.treeData}),ue(function(){se(function(){var n;e.treeData===void 0&&o.default&&(c.value=ee(q((n=o.default)===null||n===void 0?void 0:n.call(o))))})});var N=g(),s=g(),f=g();h({selectedKeys:b(function(){var n;return(n=f.value)===null||n===void 0?void 0:n.selectedKeys}),checkedKeys:b(function(){var n;return(n=f.value)===null||n===void 0?void 0:n.checkedKeys}),halfCheckedKeys:b(function(){var n;return(n=f.value)===null||n===void 0?void 0:n.halfCheckedKeys}),loadedKeys:b(function(){var n;return(n=f.value)===null||n===void 0?void 0:n.loadedKeys}),loadingKeys:b(function(){var n;return(n=f.value)===null||n===void 0?void 0:n.loadingKeys}),expandedKeys:b(function(){var n;return(n=f.value)===null||n===void 0?void 0:n.expandedKeys})});var U=function(){var i=me(c.value),r=i.keyEntities,v;return e.defaultExpandAll?v=Object.keys(r):e.defaultExpandParent?v=be(e.expandedKeys||e.defaultExpandedKeys||[],r):v=e.expandedKeys||e.defaultExpandedKeys,v},A=g(e.selectedKeys||e.defaultSelectedKeys||[]),w=g(U());z(function(){return e.selectedKeys},function(){e.selectedKeys!==void 0&&(A.value=e.selectedKeys)},{immediate:!0}),z(function(){return e.expandedKeys},function(){e.expandedKeys!==void 0&&(w.value=e.expandedKeys)},{immediate:!0});var H=function(i,r){var v=r.isLeaf;v||i.shiftKey||i.metaKey||i.ctrlKey||f.value.onNodeExpand(i,r)},a=fe(H,200,{leading:!0}),K=function(i,r){e.expandedKeys===void 0&&(w.value=i),d("update:expandedKeys",i),d("expand",i,r)},y=function(i,r){var v=e.expandAction;v==="click"&&a(i,r),d("click",i,r)},B=function(i,r){var v=e.expandAction;(v==="dblclick"||v==="doubleclick")&&a(i,r),d("doubleclick",i,r),d("dblclick",i,r)},_=b(function(){return ke(e.fieldNames)}),F=function(i,r){var v=e.multiple,T=r.node,k=r.nativeEvent,P=T[_.value.key],I=x(x({},r),{selected:!0}),V=(k==null?void 0:k.ctrlKey)||(k==null?void 0:k.metaKey),W=k==null?void 0:k.shiftKey,m;v&&V?(m=i,N.value=P,s.value=m,I.selectedNodes=G(c.value,m,_.value)):v&&W?(m=Array.from(new Set([].concat(M(s.value||[]),M(Ce({treeData:c.value,expandedKeys:w.value,startKey:P,endKey:N.value,fieldNames:_.value}))))),I.selectedNodes=G(c.value,m,_.value)):(m=[P],N.value=P,s.value=m,I.selectedNodes=G(c.value,m,_.value)),d("update:selectedKeys",m),d("select",m,I),e.selectedKeys===void 0&&(A.value=m)},R=function(i,r){d("update:checkedKeys",i),d("check",i,r)},$=ae("tree",e),S=$.prefixCls,j=$.direction;return function(){var n=le("".concat(S.value,"-directory"),C({},"".concat(S.value,"-directory-rtl"),j.value==="rtl"),l.class),i=e.icon,r=i===void 0?o.icon:i,v=e.blockNode,T=v===void 0?!0:v,k=De(e,["icon","blockNode"]);return D(L,O(O(O({},l),{},{icon:r||Te,ref:f,blockNode:T},k),{},{prefixCls:S.value,class:n,expandedKeys:w.value,selectedKeys:A.value,onSelect:F,onClick:y,onDblclick:B,onExpand:K,onCheck:R}),o)}}});var Y=Q(x(x({},Ne),{name:"ATreeNode",props:Ee}));const Se=x(L,{DirectoryTree:J,TreeNode:Y,install:function(e){return e.component(L.name,L),e.component(Y.name,Y),e.component(J.name,J),e}});export{Se as _};
