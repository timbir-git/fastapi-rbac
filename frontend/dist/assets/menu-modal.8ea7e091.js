import"./default.76e08716.js";import{M as _a}from"./index.647ff16d.js";import"./index.47c5c8b2.js";import{_ as Na,I as Va,F as Ea}from"./index.6e8bd907.js";import"./index.fa696f9c.js";import{u as La}from"./index.5fedb982.js";import{u as Da,a as Pa,b as Ka,c as Fa,d as Oa,t as Xe,B as Ma,e as Aa,g as Ha,S as Ba,_ as Ra}from"./index.8ab58dcd.js";import{i as ja,A as Wa,H as Je,r as Fe,c as P,J as _e,$ as Ua,Q as J,Z as te,e as C,G as Z,n as S,W as $a,s as z,C as Te,bd as za,R as Ne,m as ce,z as me,q as ia,a1 as ca,aN as ie,b0 as da,Y as ye,ad as ea,I as Ga,D as aa,ah as Ya,_ as qa,a as Ja,o as Ke,b as ta,w as Y,f as T,F as Qa,aE as Za,aG as na,aH as Xa,h as et,aI as at,a$ as tt,bi as nt,u as lt}from"./index.851d8163.js";import{u as rt}from"./useModal.960570e2.js";import{r as ot,i as ut,m as it,a as ct}from"./conf.f5df1cf4.js";import{g as dt,a as st,p as vt}from"./menu.967b72d4.js";import{K as pe}from"./KeyCode.59783313.js";import{T as ft,c as ht,a as ze,u as pt,r as mt}from"./iconUtil.8455fcc7.js";import{w as Oe}from"./useFlexGapSupport.66243b53.js";import{u as la}from"./useState.ea7c1088.js";import"./index.338b79aa.js";import"./List.994b17ce.js";import"./index.e60ac993.js";function sa(a){return Array.isArray(a)?a:a!==void 0?[a]:[]}function yt(a){var e=a||{},u=e.label,n=e.value,o=e.children,r=n||"value";return{_title:u?[u]:["title","label"],value:r,key:r,children:o||"children"}}function Ge(a){return a.disabled||a.disableCheckbox||a.checkable===!1}function gt(a,e){var u=[];function n(o){o.forEach(function(r){u.push(r[e.value]);var t=r[e.children];t&&n(t)})}return n(a),u}function Ye(a){return a==null}var va=Symbol("TreeSelectContextPropsKey");function bt(a){return Wa(va,a)}function Ct(){return ja(va,{})}var St={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0};const wt=Je({name:"OptionList",inheritAttrs:!1,slots:["notFoundContent","menuItemSelectedIcon"],setup:function(e,u){var n=u.slots,o=u.expose,r=Da(),t=Pa(),l=Ct(),s=Fe(),i=Ka(function(){return l.treeData},[function(){return r.open},function(){return l.treeData}],function(b){return b[0]}),h=P(function(){var b=t.checkable,c=t.halfCheckedKeys,w=t.checkedKeys;return b?{checked:w,halfChecked:c}:null});_e(function(){return r.open},function(){Ua(function(){var b;r.open&&!r.multiple&&t.checkedKeys.length&&((b=s.value)===null||b===void 0||b.scrollTo({key:t.checkedKeys[0]}))})},{immediate:!0,flush:"post"});var y=P(function(){return String(r.searchValue).toLowerCase()}),f=function(c){return y.value?String(c[t.treeNodeFilterProp]).toLowerCase().includes(y.value):!1},x=J(t.treeDefaultExpandedKeys),p=J(null);_e(function(){return r.searchValue},function(){r.searchValue&&(p.value=gt(te(l.treeData),te(l.fieldNames)))},{immediate:!0});var d=P(function(){return t.treeExpandedKeys?t.treeExpandedKeys.slice():r.searchValue?p.value:x.value}),B=function(c){var w;x.value=c,p.value=c,(w=t.onTreeExpand)===null||w===void 0||w.call(t,c)},g=function(c){c.preventDefault()},L=function(c,w){var O=w.node,R,H,j=t.checkable,K=t.checkedKeys;j&&Ge(O)||((R=l.onSelect)===null||R===void 0||R.call(l,O.key,{selected:!K.includes(O.key)}),r.multiple||(H=r.toggleOpen)===null||H===void 0||H.call(r,!1))},k=Fe(null),_=P(function(){return t.keyEntities[k.value]}),G=function(c){k.value=c};return o({scrollTo:function(){for(var c,w,O,R=arguments.length,H=new Array(R),j=0;j<R;j++)H[j]=arguments[j];return(O=(w=s.value)===null||w===void 0?void 0:w.scrollTo)===null||O===void 0?void 0:(c=O).call.apply(c,[w].concat(H))},onKeydown:function(c){var w,O=c.which;switch(O){case pe.UP:case pe.DOWN:case pe.LEFT:case pe.RIGHT:(w=s.value)===null||w===void 0||w.onKeydown(c);break;case pe.ENTER:{if(_.value){var R=_.value.node||{},H=R.selectable,j=R.value;H!==!1&&L(null,{node:{key:k.value},selected:!t.checkedKeys.includes(j)})}break}case pe.ESC:r.toggleOpen(!1)}},onKeyup:function(){}}),function(){var b,c=r.prefixCls,w=r.multiple,O=r.searchValue,R=r.open,H=r.notFoundContent,j=H===void 0?(b=n.notFoundContent)===null||b===void 0?void 0:b.call(n):H,K=l.listHeight,N=l.listItemHeight,V=l.virtual,$=t.checkable,de=t.treeDefaultExpandAll,se=t.treeIcon,ne=t.showTreeIcon,le=t.switcherIcon,ge=t.treeLine,ve=t.loadData,X=t.treeLoadedKeys,re=t.treeMotion,fe=t.onTreeLoad,be=t.checkedKeys;if(i.value.length===0)return C("div",{role:"listbox",class:"".concat(c,"-empty"),onMousedown:g},[j]);var ee={fieldNames:l.fieldNames};return X&&(ee.loadedKeys=X),d.value&&(ee.expandedKeys=d.value),C("div",{onMousedown:g},[_.value&&R&&C("span",{style:St,"aria-live":"assertive"},[_.value.node.value]),C(ft,Z(Z({ref:s,focusable:!1,prefixCls:"".concat(c,"-tree"),treeData:i.value,height:K,itemHeight:N,virtual:V,multiple:w,icon:se,showIcon:ne,switcherIcon:le,showLine:ge,loadData:O?null:ve,motion:re,activeKey:k.value,checkable:$,checkStrictly:!0,checkedKeys:h.value,selectedKeys:$?[]:be,defaultExpandAll:de},ee),{},{onActiveChange:G,onSelect:L,onCheck:L,onExpand:B,onLoad:fe,filterTreeNode:f}),S(S({},n),{checkable:t.customSlots.treeCheckable}))])}}});var It="SHOW_ALL",fa="SHOW_PARENT",Qe="SHOW_CHILD";function ra(a,e,u,n){var o=new Set(a);return e===Qe?a.filter(function(r){var t=u[r];return!(t&&t.children&&t.children.some(function(l){var s=l.node;return o.has(s[n.value])})&&t.children.every(function(l){var s=l.node;return Ge(s)||o.has(s[n.value])}))}):e===fa?a.filter(function(r){var t=u[r],l=t?t.parent:null;return!(l&&!Ge(l.node)&&o.has(l.key))}):a}var Me=function(){return null};Me.inheritAttrs=!1;Me.displayName="ATreeSelectNode";Me.isTreeSelectNode=!0;const Ze=Me;var xt=globalThis&&globalThis.__rest||function(a,e){var u={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&e.indexOf(n)<0&&(u[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(a);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(a,n[o])&&(u[n[o]]=a[n[o]]);return u};function kt(a){return a&&a.type&&a.type.isTreeSelectNode}function Tt(a){function e(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $a(u).map(function(n){var o,r,t;if(!kt(n))return z(!n,"TreeSelect/TreeSelectNode can only accept TreeSelectNode as children."),null;for(var l=n.children||{},s=n.key,i={},h=0,y=Object.entries(n.props);h<y.length;h++){var f=Te(y[h],2),x=f[0],p=f[1];i[za(x)]=p}var d=i.isLeaf,B=i.checkable,g=i.selectable,L=i.disabled,k=i.disableCheckbox,_={isLeaf:d||d===""||void 0,checkable:B||B===""||void 0,selectable:g||g===""||void 0,disabled:L||L===""||void 0,disableCheckbox:k||k===""||void 0},G=S(S({},i),_),b=i.title,c=b===void 0?(o=l.title)===null||o===void 0?void 0:o.call(l,G):b,w=i.switcherIcon,O=w===void 0?(r=l.switcherIcon)===null||r===void 0?void 0:r.call(l,G):w,R=xt(i,["title","switcherIcon"]),H=(t=l.default)===null||t===void 0?void 0:t.call(l),j=S(S(S({},R),{title:c,switcherIcon:O,key:s,isLeaf:d}),_),K=e(H);return K.length&&(j.children=K),j})}return e(a)}function qe(a){if(!a)return a;var e=S({},a);return"props"in e||Object.defineProperty(e,"props",{get:function(){return z(!1,"New `vc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),e}}),e}function _t(a,e,u,n,o,r){var t=null,l=null;function s(){function i(h){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return h.map(function(x,p){var d="".concat(y,"-").concat(p),B=x[r.value],g=u.includes(B),L=i(x[r.children]||[],d,g),k=C(Ze,x,{default:function(){return[L.map(function(b){return b.node})]}});if(e===B&&(t=k),g){var _={pos:d,node:k,children:L};return f||l.push(_),_}return null}).filter(function(x){return x})}l||(l=[],i(n),l.sort(function(h,y){var f=h.node.props.value,x=y.node.props.value,p=u.indexOf(f),d=u.indexOf(x);return p-d}))}Object.defineProperty(a,"triggerNode",{get:function(){return z(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),s(),t}}),Object.defineProperty(a,"allCheckedNodes",{get:function(){return z(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),s(),o?l:l.map(function(h){var y=h.node;return y})}})}function Nt(a,e){var u=e.id,n=e.pId,o=e.rootPId,r={},t=[],l=a.map(function(s){var i=S({},s),h=i[u];return r[h]=i,i.key=i.key||h,i});return l.forEach(function(s){var i=s[n],h=r[i];h&&(h.children=h.children||[],h.children.push(s)),(i===o||!h&&o===null)&&t.push(s)}),t}function Vt(a,e,u){var n=J();return _e([u,a,e],function(){var o=u.value;a.value?n.value=u.value?Nt(te(a.value),S({id:"id",pId:"pId",rootPId:null},o!==!0?o:{})):te(a.value).slice():n.value=Tt(te(e.value))},{immediate:!0,deep:!0}),n}const Et=function(a){var e=J({valueLabels:new Map}),u=J();_e(a,function(){u.value=te(a.value)},{immediate:!0});var n=P(function(){var o=e.value.valueLabels,r=new Map,t=u.value.map(function(l){var s,i=l.value,h=(s=l.label)!==null&&s!==void 0?s:o.get(i);return r.set(i,h),S(S({},l),{label:h})});return e.value.valueLabels=r,t});return[n]},Lt=function(a,e){var u=J(new Map),n=J({});return Ne(function(){var o=e.value,r=ht(a.value,{fieldNames:o,initWrapper:function(l){return S(S({},l),{valueEntities:new Map})},processEntity:function(l,s){var i=l.node[o.value];{var h=l.node.key;z(!Ye(i),"TreeNode `value` is invalidate: undefined"),z(!s.valueEntities.has(i),"Same `value` exist in the tree: ".concat(i)),z(!h||String(h)===String(i),"`key` or `value` with TreeNode must be the same or you can remove one of them. key: ".concat(h,", value: ").concat(i,"."))}s.valueEntities.set(i,l)}});u.value=r.valueEntities,n.value=r.keyEntities}),{valueEntities:u,keyEntities:n}},Dt=function(a,e,u,n,o,r){var t=J([]),l=J([]);return Ne(function(){var s=a.value.map(function(f){var x=f.value;return x}),i=e.value.map(function(f){var x=f.value;return x}),h=s.filter(function(f){return!n.value[f]});if(u.value){var y=ze(s,!0,n.value,o.value,r.value);s=y.checkedKeys,i=y.halfCheckedKeys}t.value=Array.from(new Set([].concat(ce(h),ce(s)))),l.value=i}),[t,l]},Pt=function(a,e,u){var n=u.treeNodeFilterProp,o=u.filterTreeNode,r=u.fieldNames;return P(function(){var t=r.value.children,l=e.value,s=n==null?void 0:n.value;if(!l||o.value===!1)return a.value;var i;if(typeof o.value=="function")i=o.value;else{var h=l.toUpperCase();i=function(x,p){var d=p[s];return String(d).toUpperCase().includes(h)}}function y(f){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=[],d=0,B=f.length;d<B;d++){var g=f[d],L=g[t],k=x||i(l,qe(g)),_=y(L||[],k);(k||_.length)&&p.push(S(S({},g),me({},t,_)))}return p}return y(a.value)})};function Kt(a){var e=a.searchPlaceholder,u=a.treeCheckStrictly,n=a.treeCheckable,o=a.labelInValue,r=a.value,t=a.multiple;z(!e,"`searchPlaceholder` has been removed, please use `placeholder` instead"),u&&o===!1&&z(!1,"`treeCheckStrictly` will force set `labelInValue` to `true`."),(o||u)&&z(sa(r).every(function(l){return l&&ia(l)==="object"&&"value"in l}),"Invalid prop `value` supplied to `TreeSelect`. You should use { label: string, value: string | number } or [{ label: string, value: string | number }] instead."),u||t||n?z(!r||Array.isArray(r),"`value` should be an array when `TreeSelect` is checkable or multiple."):z(!Array.isArray(r),"`value` should not be array when `TreeSelect` is single mode.")}function ha(){return S(S({},Oe(Aa(),["mode"])),{prefixCls:String,id:String,value:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array]},onChange:{type:Function},searchValue:String,inputValue:String,onSearch:{type:Function},autoClearSearchValue:{type:Boolean,default:void 0},filterTreeNode:{type:[Boolean,Function],default:void 0},treeNodeFilterProp:String,onSelect:Function,onDeselect:Function,showCheckedStrategy:{type:String},treeNodeLabelProp:String,fieldNames:{type:Object},multiple:{type:Boolean,default:void 0},treeCheckable:{type:Boolean,default:void 0},treeCheckStrictly:{type:Boolean,default:void 0},labelInValue:{type:Boolean,default:void 0},treeData:{type:Array},treeDataSimpleMode:{type:[Boolean,Object],default:void 0},loadData:{type:Function},treeLoadedKeys:{type:Array},onTreeLoad:{type:Function},treeDefaultExpandAll:{type:Boolean,default:void 0},treeExpandedKeys:{type:Array},treeDefaultExpandedKeys:{type:Array},onTreeExpand:{type:Function},virtual:{type:Boolean,default:void 0},listHeight:Number,listItemHeight:Number,onDropdownVisibleChange:{type:Function},treeLine:{type:[Boolean,Object],default:void 0},treeIcon:ye.any,showTreeIcon:{type:Boolean,default:void 0},switcherIcon:ye.any,treeMotion:ye.any,children:Array,showArrow:{type:Boolean,default:void 0},showSearch:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},placeholder:ye.any,maxTagPlaceholder:{type:Function},dropdownPopupAlign:ye.any,customSlots:Object})}function Ft(a){return!a||ia(a)!=="object"}const Ot=Je({name:"TreeSelect",inheritAttrs:!1,props:ca(ha(),{treeNodeFilterProp:"value",autoClearSearchValue:!0,showCheckedStrategy:Qe,listHeight:200,listItemHeight:20,prefixCls:"vc-tree-select"}),setup:function(e,u){var n=u.attrs,o=u.expose,r=u.slots,t=Fa(ie(e,"id")),l=P(function(){return e.treeCheckable&&!e.treeCheckStrictly}),s=P(function(){return e.treeCheckable||e.treeCheckStrictly}),i=P(function(){return e.treeCheckStrictly||e.labelInValue}),h=P(function(){return s.value||e.multiple});Ne(function(){Kt(e)});var y=P(function(){return yt(e.fieldNames)}),f=la("",{value:P(function(){return e.searchValue!==void 0?e.searchValue:e.inputValue}),postState:function(v){return v||""}}),x=Te(f,2),p=x[0],d=x[1],B=function(v){var m;d(v),(m=e.onSearch)===null||m===void 0||m.call(e,v)},g=Vt(ie(e,"treeData"),ie(e,"children"),ie(e,"treeDataSimpleMode")),L=Lt(g,y),k=L.keyEntities,_=L.valueEntities,G=function(v){var m=[],I=[];return v.forEach(function(D){_.value.has(D)?I.push(D):m.push(D)}),{missingRawValues:m,existRawValues:I}},b=Pt(g,p,{fieldNames:y,treeNodeFilterProp:ie(e,"treeNodeFilterProp"),filterTreeNode:ie(e,"filterTreeNode")}),c=function(v){if(v){if(e.treeNodeLabelProp)return v[e.treeNodeLabelProp];for(var m=y.value._title,I=0;I<m.length;I+=1){var D=v[m[I]];if(D!==void 0)return D}}},w=function(v){var m=sa(v);return m.map(function(I){return Ft(I)?{value:I}:I})},O=function(v){var m=w(v);return m.map(function(I){var D=I.label,F=I.value,A=I.halfChecked,W,U=_.value.get(F);return U&&(D=D!=null?D:c(U.node),W=U.node.disabled),{label:D,value:F,halfChecked:A,disabled:W}})},R=la(e.defaultValue,{value:ie(e,"value")}),H=Te(R,2),j=H[0],K=H[1],N=P(function(){return w(j.value)}),V=J([]),$=J([]);Ne(function(){var E=[],v=[];N.value.forEach(function(m){m.halfChecked?v.push(m):E.push(m)}),V.value=E,$.value=v});var de=P(function(){return V.value.map(function(E){return E.value})}),se=pt(k),ne=se.maxLevel,le=se.levelEntities,ge=Dt(V,$,l,k,ne,le),ve=Te(ge,2),X=ve[0],re=ve[1],fe=P(function(){var E=ra(X.value,e.showCheckedStrategy,k.value,y.value),v=E.map(function(F){var A,W,U;return(U=(W=(A=k.value[F])===null||A===void 0?void 0:A.node)===null||W===void 0?void 0:W[y.value.value])!==null&&U!==void 0?U:F}),m=v.map(function(F){var A=V.value.find(function(W){return W.value===F});return{value:F,label:A==null?void 0:A.label}}),I=O(m),D=I[0];return!h.value&&D&&Ye(D.value)&&Ye(D.label)?[]:I.map(function(F){var A;return S(S({},F),{label:(A=F.label)!==null&&A!==void 0?A:F.value})})}),be=Et(fe),ee=Te(be,1),Ae=ee[0],he=function(v,m,I){var D=O(v);if(K(D),e.autoClearSearchValue&&d(""),e.onChange){var F=v;if(l.value){var A=ra(v,e.showCheckedStrategy,k.value,y.value);F=A.map(function(Q){var xe=_.value.get(Q);return xe?xe.node[y.value.value]:Q})}var W=m||{triggerValue:void 0,selected:void 0},U=W.triggerValue,we=W.selected,oe=F;if(e.treeCheckStrictly){var ue=$.value.filter(function(Q){return!F.includes(Q.value)});oe=[].concat(ce(oe),ce(ue))}var q=O(oe),ae={preValue:V.value,triggerValue:U},Ie=!0;(e.treeCheckStrictly||I==="selection"&&!we)&&(Ie=!1),_t(ae,U,v,g.value,Ie,y.value),s.value?ae.checked=we:ae.selected=we;var Pe=i.value?q:q.map(function(Q){return Q.value});e.onChange(h.value?Pe:Pe[0],i.value?null:q.map(function(Q){return Q.label}),ae)}},Ve=function(v,m){var I=m.selected,D=m.source,F,A,W,U=te(k.value),we=te(_.value),oe=U[v],ue=oe==null?void 0:oe.node,q=(F=ue==null?void 0:ue[y.value.value])!==null&&F!==void 0?F:v;if(!h.value)he([q],{selected:!0,triggerValue:q},"option");else{var ae=I?[].concat(ce(de.value),[q]):X.value.filter(function(ke){return ke!==q});if(l.value){var Ie=G(ae),Pe=Ie.missingRawValues,Q=Ie.existRawValues,xe=Q.map(function(ke){return we.get(ke).key}),Ue;if(I){var ka=ze(xe,!0,U,ne.value,le.value);Ue=ka.checkedKeys}else{var Ta=ze(xe,{checked:!1,halfCheckedKeys:re.value},U,ne.value,le.value);Ue=Ta.checkedKeys}ae=[].concat(ce(Pe),ce(Ue.map(function(ke){return U[ke].node[y.value.value]})))}he(ae,{selected:I,triggerValue:q},D||"option")}I||!h.value?(A=e.onSelect)===null||A===void 0||A.call(e,q,qe(ue)):(W=e.onDeselect)===null||W===void 0||W.call(e,q,qe(ue))},Ce=function(v){if(e.onDropdownVisibleChange){var m={};Object.defineProperty(m,"documentClickClose",{get:function(){return z(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),e.onDropdownVisibleChange(v,m)}},He=function(v,m){var I=v.map(function(D){return D.value});if(m.type==="clear"){he(I,{},"selection");return}m.values.length&&Ve(m.values[0].value,{selected:!1,source:"selection"})},M=da(e),Be=M.treeNodeFilterProp,Se=M.loadData,Re=M.treeLoadedKeys,je=M.onTreeLoad,Ee=M.treeDefaultExpandAll,Le=M.treeExpandedKeys,We=M.treeDefaultExpandedKeys,pa=M.onTreeExpand,ma=M.virtual,ya=M.listHeight,ga=M.listItemHeight,ba=M.treeLine,Ca=M.treeIcon,Sa=M.showTreeIcon,wa=M.switcherIcon,Ia=M.treeMotion,xa=M.customSlots;Oa(Xe({checkable:s,loadData:Se,treeLoadedKeys:Re,onTreeLoad:je,checkedKeys:X,halfCheckedKeys:re,treeDefaultExpandAll:Ee,treeExpandedKeys:Le,treeDefaultExpandedKeys:We,onTreeExpand:pa,treeIcon:Ca,treeMotion:Ia,showTreeIcon:Sa,switcherIcon:wa,treeLine:ba,treeNodeFilterProp:Be,keyEntities:k,customSlots:xa})),bt(Xe({virtual:ma,listHeight:ya,listItemHeight:ga,treeData:b,fieldNames:y,onSelect:Ve}));var De=Fe();return o({focus:function(){var v;(v=De.value)===null||v===void 0||v.focus()},blur:function(){var v;(v=De.value)===null||v===void 0||v.blur()},scrollTo:function(v){var m;(m=De.value)===null||m===void 0||m.scrollTo(v)}}),function(){var E,v=Oe(e,["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","virtual","listHeight","listItemHeight","onDropdownVisibleChange","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion"]);return C(Ma,Z(Z(Z({ref:De},n),v),{},{id:t,prefixCls:e.prefixCls,mode:h.value?"multiple":void 0,displayValues:Ae.value,onDisplayValuesChange:He,searchValue:p.value,onSearch:B,OptionList:wt,emptyOptions:!g.value.length,onDropdownVisibleChange:Ce,tagRender:e.tagRender||r.tagRender,dropdownMatchSelectWidth:(E=e.dropdownMatchSelectWidth)!==null&&E!==void 0?E:!0}),r)}}});var oa=function(e,u,n){return n!==void 0?n:"".concat(e,"-").concat(u)};function Mt(){return S(S({},Oe(ha(),["showTreeIcon","treeMotion","inputIcon","getInputElement","treeLine","customSlots"])),{suffixIcon:ye.any,size:{type:String},bordered:{type:Boolean,default:void 0},treeLine:{type:[Boolean,Object],default:void 0},replaceFields:{type:Object},"onUpdate:value":{type:Function},"onUpdate:treeExpandedKeys":{type:Function},"onUpdate:searchValue":{type:Function}})}var $e=Je({name:"ATreeSelect",inheritAttrs:!1,props:ca(Mt(),{choiceTransitionName:"",listHeight:256,treeIcon:!1,listItemHeight:26,bordered:!0}),slots:["title","titleRender","placeholder","maxTagPlaceholder","treeIcon","switcherIcon","notFoundContent"],setup:function(e,u){var n=u.attrs,o=u.slots,r=u.expose,t=u.emit;z(!(e.treeData===void 0&&o.default),"`children` of TreeSelect is deprecated. Please use `treeData` instead."),Ne(function(){ea(e.multiple!==!1||!e.treeCheckable,"TreeSelect","`multiple` will always be `true` when `treeCheckable` is true"),ea(e.replaceFields===void 0,"TreeSelect","`replaceFields` is deprecated, please use fieldNames instead")});var l=La(),s=Ga("select",e),i=s.prefixCls,h=s.renderEmpty,y=s.direction,f=s.virtual,x=s.dropdownMatchSelectWidth,p=s.size,d=s.getPopupContainer,B=s.getPrefixCls,g=P(function(){return B()}),L=P(function(){return oa(g.value,"slide-up",e.transitionName)}),k=P(function(){return oa(g.value,"",e.choiceTransitionName)}),_=P(function(){return B("select-tree",e.prefixCls)}),G=P(function(){return B("tree-select",e.prefixCls)}),b=P(function(){return aa(e.dropdownClassName,"".concat(G.value,"-dropdown"),me({},"".concat(G.value,"-dropdown-rtl"),y.value==="rtl"))}),c=P(function(){return!!(e.treeCheckable||e.multiple)}),w=Fe();r({focus:function(){var N,V;(V=(N=w.value).focus)===null||V===void 0||V.call(N)},blur:function(){var N,V;(V=(N=w.value).blur)===null||V===void 0||V.call(N)}});var O=function(){for(var N=arguments.length,V=new Array(N),$=0;$<N;$++)V[$]=arguments[$];t("update:value",V[0]),t.apply(void 0,["change"].concat(V)),l.onFieldChange()},R=function(N){t("update:treeExpandedKeys",N),t("treeExpand",N)},H=function(N){t("update:searchValue",N),t("search",N)},j=function(N){t("blur",N),l.onFieldBlur()};return function(){var K,N,V,$=e.notFoundContent,de=$===void 0?(N=o.notFoundContent)===null||N===void 0?void 0:N.call(o):$,se=e.prefixCls,ne=e.bordered,le=e.listHeight,ge=e.listItemHeight,ve=e.multiple,X=e.treeIcon,re=e.treeLine,fe=e.switcherIcon,be=fe===void 0?(V=o.switcherIcon)===null||V===void 0?void 0:V.call(o):fe,ee=e.fieldNames,Ae=ee===void 0?e.replaceFields:ee,he=e.id,Ve=he===void 0?l.id.value:he,Ce=Ha(S(S({},e),{multiple:c.value,prefixCls:i.value}),o),He=Ce.suffixIcon,M=Ce.removeIcon,Be=Ce.clearIcon,Se;de!==void 0?Se=de:Se=h.value("Select");var Re=Oe(e,["suffixIcon","itemIcon","removeIcon","clearIcon","switcherIcon","bordered","onUpdate:value","onUpdate:treeExpandedKeys","onUpdate:searchValue"]),je=aa(!se&&G.value,(K={},me(K,"".concat(i.value,"-lg"),p.value==="large"),me(K,"".concat(i.value,"-sm"),p.value==="small"),me(K,"".concat(i.value,"-rtl"),y.value==="rtl"),me(K,"".concat(i.value,"-borderless"),!ne),K),n.class),Ee={};return e.treeData===void 0&&o.default&&(Ee.children=Ya(o.default())),C(Ot,Z(Z(Z(Z({},n),Re),{},{virtual:f.value,dropdownMatchSelectWidth:x.value,id:Ve,fieldNames:Ae,ref:w,prefixCls:i.value,class:je,listHeight:le,listItemHeight:ge,treeLine:!!re,inputIcon:He,multiple:ve,removeIcon:M,clearIcon:Be,switcherIcon:function(We){return mt(_.value,be,re,We)},showTreeIcon:X,notFoundContent:Se,getPopupContainer:d.value,treeMotion:null,dropdownClassName:b.value,choiceTransitionName:k.value,onChange:O,onBlur:j,onSearch:H,onTreeExpand:R},Ee),{},{transitionName:L.value,customSlots:S(S({},o),{treeCheckable:function(){return C("span",{class:"".concat(i.value,"-tree-checkbox-inner")},null)}}),maxTagPlaceholder:e.maxTagPlaceholder||o.maxTagPlaceholder}),S(S({},o),{treeCheckable:function(){return C("span",{class:"".concat(i.value,"-tree-checkbox-inner")},null)}}))}}}),ua=Ze;const At=S($e,{TreeNode:Ze,SHOW_ALL:It,SHOW_PARENT:fa,SHOW_CHILD:Qe,install:function(e){return e.component($e.name,$e),e.component(ua.displayName,ua),e}});const Ht={class:"menu-modal"},Bt={__name:"menu-modal",props:{modalTitle:{type:String},modalType:{type:String,default:"create"}},setup(a,{expose:e}){const u=a,{showModal:n,updateId:o,formRef:r}=rt(),t=Ja({menuForm:{name:"",icon:null,path:null,type:0,component:null,pid:0,identifier:null,api:null,method:null},menusOptions:[]}),l=(p,d)=>d.name.toLowerCase().indexOf(p.toLowerCase())>=0,s=(p,d)=>{if(d.value)return d.value.toLowerCase().indexOf(p.toLowerCase())>=0};_e(n,async p=>{if(p){const d=await dt();t.menusOptions=d.data,t.menusOptions.unshift({id:0,name:"\u9876\u5C42\u83DC\u5355"})}});const i=p=>{n.value=!0,o.value=p.id,t.menuForm=p},h=()=>{r.value.validateFields().then(async()=>{let p;u.modalType==="create"?p=await st(t.menuForm):p=await vt(o.value,t.menuForm),nt(p),r.value.resetFields(),n.value=!n.value,lt().isPush=!0})},y=()=>{r.value.resetFields()},{menuForm:f,menusOptions:x}=da(t);return e({openModal:i,showModal:n}),(p,d)=>{const B=At,g=Na,L=Va,k=Ba,_=Ra,G=Ea,b=_a;return Ke(),ta("div",Ht,[C(b,{visible:T(n),"onUpdate:visible":d[9]||(d[9]=c=>tt(n)?n.value=c:null),title:u.modalTitle,"ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",onOk:h,onCancel:y},{default:Y(()=>[C(G,{ref_key:"formRef",ref:r,model:T(f),class:"form",rules:T(ot)},{default:Y(()=>[C(g,{name:"pid",label:"\u4E0A\u7EA7\u83DC\u5355",class:"item"},{default:Y(()=>[C(B,{value:T(f).pid,"onUpdate:value":d[0]||(d[0]=c=>T(f).pid=c),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},"allow-clear":"","tree-data":T(x),"field-names":{children:"children",label:"name",value:"id"},filterTreeNode:l},null,8,["value","tree-data"])]),_:1}),C(g,{name:"name",label:"\u540D\u79F0"},{default:Y(()=>[C(L,{value:T(f).name,"onUpdate:value":d[1]||(d[1]=c=>T(f).name=c)},null,8,["value"])]),_:1}),C(g,{name:"icon",label:"\u56FE\u6807"},{default:Y(()=>[C(_,{value:T(f).icon,"onUpdate:value":d[2]||(d[2]=c=>T(f).icon=c),style:{width:"100%"},"show-search":"",filterOption:s},{default:Y(()=>[(Ke(!0),ta(Qa,null,Za(T(ut)(),c=>(Ke(),na(k,{key:c.value,value:c.value},{default:Y(()=>[(Ke(),na(Xa(p.$loadIconCpn(c.label)))),et(" "+at(c.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),C(g,{name:"path",label:"\u8DEF\u7531"},{default:Y(()=>[C(L,{value:T(f).path,"onUpdate:value":d[3]||(d[3]=c=>T(f).path=c)},null,8,["value"])]),_:1}),C(g,{name:"type",label:"\u7C7B\u578B"},{default:Y(()=>[C(_,{value:T(f).type,"onUpdate:value":d[4]||(d[4]=c=>T(f).type=c),style:{width:"100%"},options:T(it)()},null,8,["value","options"])]),_:1}),C(g,{name:"component",label:"\u7EC4\u4EF6"},{default:Y(()=>[C(L,{value:T(f).component,"onUpdate:value":d[5]||(d[5]=c=>T(f).component=c),placeholder:"views/main"},null,8,["value"])]),_:1}),C(g,{name:"identifier",label:"\u6743\u9650"},{default:Y(()=>[C(L,{value:T(f).identifier,"onUpdate:value":d[6]||(d[6]=c=>T(f).identifier=c)},null,8,["value"])]),_:1}),C(g,{name:"api",label:"\u63A5\u53E3"},{default:Y(()=>[C(L,{value:T(f).api,"onUpdate:value":d[7]||(d[7]=c=>T(f).api=c)},null,8,["value"])]),_:1}),C(g,{name:"method",label:"\u65B9\u6CD5"},{default:Y(()=>[C(_,{value:T(f).method,"onUpdate:value":d[8]||(d[8]=c=>T(f).method=c),style:{width:"100%"},options:T(ct)()},null,8,["value","options"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","title"])])}}},rn=qa(Bt,[["__scopeId","data-v-ed01cb76"],["__file","D:/Code/fastapi_rbac/frontend/src/views/main/system/menu/menu-modal.vue"]]);export{rn as default};
