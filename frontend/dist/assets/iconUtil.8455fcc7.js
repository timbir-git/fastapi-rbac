import{Q,R as Ne,H as Fe,A as wn,c as M,i as Pn,e as _,z as q,Y as De,s as Oe,r as ie,n as B,a as Tn,a4 as Ln,ag as ea,G as fe,D as Ce,a6 as na,q as Ae,m as Le,W as aa,C as Me,bd as ta,bl as ra,J as Ee,$ as In,V as oa,a5 as la,aP as ia,af as da,F as ua,a1 as ca,Z as ln,ao as va,P as sa,bm as fa,bn as ya,bo as ha,bp as ga,x as pa,y as ba}from"./index.851d8163.js";import{w as An,p as Ka}from"./useFlexGapSupport.66243b53.js";import{L as ka}from"./List.994b17ce.js";import{p as Mn}from"./index.647ff16d.js";import{K as Te}from"./KeyCode.59783313.js";function be(n){var e=Q();return Ne(function(){e.value=n()},{flush:"sync"}),e}var Fn=Symbol("TreeContextKey"),ma=Fe({name:"TreeContext",props:{value:{type:Object}},setup:function(e,r){var a=r.slots;return wn(Fn,M(function(){return e.value})),function(){var t;return(t=a.default)===null||t===void 0?void 0:t.call(a)}}}),fn=function(){return Pn(Fn,M(function(){return{}}))},_n=Symbol("KeysStateKey"),xa=function(e){wn(_n,e)},jn=function(){return Pn(_n,{expandedKeys:Q([]),selectedKeys:Q([]),loadedKeys:Q([]),loadingKeys:Q([]),checkedKeys:Q([]),halfCheckedKeys:Q([]),expandedKeysSet:M(function(){return new Set}),selectedKeysSet:M(function(){return new Set}),loadedKeysSet:M(function(){return new Set}),loadingKeysSet:M(function(){return new Set}),checkedKeysSet:M(function(){return new Set}),halfCheckedKeysSet:M(function(){return new Set}),flattenNodes:Q([])})},Ca=function(e){for(var r=e.prefixCls,a=e.level,t=e.isStart,g=e.isEnd,f="".concat(r,"-indent-unit"),o=[],K=0;K<a;K+=1){var v;o.push(_("span",{key:K,class:(v={},q(v,f,!0),q(v,"".concat(f,"-start"),t[K]),q(v,"".concat(f,"-end"),g[K]),v)},null))}return _("span",{"aria-hidden":"true",class:"".concat(r,"-indent")},[o])};const Sa=Ca;var Bn={eventKey:[String,Number],prefixCls:String,title:De.any,data:{type:Object,default:void 0},parent:{type:Object,default:void 0},isStart:{type:Array},isEnd:{type:Array},active:{type:Boolean,default:void 0},onMousemove:{type:Function},isLeaf:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},disableCheckbox:{type:Boolean,default:void 0},icon:De.any,switcherIcon:De.any,domRef:{type:Function}},Na={prefixCls:{type:String},motion:{type:Object},focusable:{type:Boolean},activeItem:{type:Object},focused:{type:Boolean},tabindex:{type:Number},checkable:{type:Boolean},selectable:{type:Boolean},disabled:{type:Boolean},height:{type:Number},itemHeight:{type:Number},virtual:{type:Boolean},onScroll:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onActiveChange:{type:Function},onContextmenu:{type:Function},onListChangeStart:{type:Function},onListChangeEnd:{type:Function}},Da=function(){return{prefixCls:String,focusable:{type:Boolean,default:void 0},activeKey:[Number,String],tabindex:Number,children:De.any,treeData:{type:Array},fieldNames:{type:Object},showLine:{type:[Boolean,Object],default:void 0},showIcon:{type:Boolean,default:void 0},icon:De.any,selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},draggable:{type:[Function,Boolean]},defaultExpandParent:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:[Object,Array]},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},allowDrop:{type:Function},dropIndicatorRender:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onKeydown:{type:Function},onContextmenu:{type:Function},onClick:{type:Function},onDblclick:{type:Function},onScroll:{type:Function},onExpand:{type:Function},onCheck:{type:Function},onSelect:{type:Function},onLoad:{type:Function},loadData:{type:Function},loadedKeys:{type:Array},onMouseenter:{type:Function},onMouseleave:{type:Function},onRightClick:{type:Function},onDragstart:{type:Function},onDragenter:{type:Function},onDragover:{type:Function},onDragleave:{type:Function},onDragend:{type:Function},onDrop:{type:Function},onActiveChange:{type:Function},filterTreeNode:{type:Function},motion:De.any,switcherIcon:De.any,height:Number,itemHeight:Number,virtual:{type:Boolean,default:void 0},direction:{type:String}}},Ea=globalThis&&globalThis.__rest||function(n,e){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(n);t<a.length;t++)e.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(n,a[t])&&(r[a[t]]=n[a[t]]);return r},gn="open",pn="close",Oa="---";const bn=Fe({name:"TreeNode",inheritAttrs:!1,props:Bn,isTreeNode:1,slots:["title","icon","switcherIcon"],setup:function(e,r){var a=r.attrs,t=r.slots,g=r.expose;Oe(!("slots"in e.data),"treeData slots is deprecated, please use ".concat(Object.keys(e.data.slots||{}).map(function(b){return"`v-slot:"+b+"` "}),"instead"));var f=ie(!1),o=fn(),K=jn(),v=K.expandedKeysSet,N=K.selectedKeysSet,p=K.loadedKeysSet,y=K.loadingKeysSet,S=K.checkedKeysSet,m=K.halfCheckedKeysSet,E=o.value,i=E.dragOverNodeKey,k=E.dropPosition,x=E.keyEntities,w=M(function(){return cn(e.eventKey,{expandedKeysSet:v.value,selectedKeysSet:N.value,loadedKeysSet:p.value,loadingKeysSet:y.value,checkedKeysSet:S.value,halfCheckedKeysSet:m.value,dragOverNodeKey:i,dropPosition:k,keyEntities:x})}),j=be(function(){return w.value.expanded}),F=be(function(){return w.value.selected}),$=be(function(){return w.value.checked}),ne=be(function(){return w.value.loaded}),R=be(function(){return w.value.loading}),L=be(function(){return w.value.halfChecked}),Z=be(function(){return w.value.dragOver}),de=be(function(){return w.value.dragOverGapTop}),W=be(function(){return w.value.dragOverGapBottom}),te=be(function(){return w.value.pos}),ae=ie(),re=M(function(){var b=e.eventKey,l=o.value.keyEntities,s=l[b]||{},A=s.children;return!!(A||[]).length}),oe=M(function(){var b=e.isLeaf,l=o.value.loadData,s=re.value;return b===!1?!1:b||!l&&!s||l&&ne.value&&!s}),ye=M(function(){return oe.value?null:j.value?gn:pn}),H=M(function(){var b=e.disabled,l=o.value.disabled;return!!(l||b)}),z=M(function(){var b=e.checkable,l=o.value.checkable;return!l||b===!1?!1:l}),ue=M(function(){var b=e.selectable,l=o.value.selectable;return typeof b=="boolean"?b:l}),he=M(function(){var b=e.data,l=e.active,s=e.checkable,A=e.disableCheckbox,h=e.disabled,d=e.selectable;return B(B({active:l,checkable:s,disableCheckbox:A,disabled:h,selectable:d},b),{dataRef:b,data:b,isLeaf:oe.value,checked:$.value,expanded:j.value,loading:R.value,selected:F.value,halfChecked:L.value})}),ve=na(),ee=M(function(){var b=e.eventKey,l=o.value.keyEntities,s=l[b]||{},A=s.parent;return B(B({},vn(B({},e,w.value))),{parent:A})}),se=Tn({eventData:ee,eventKey:M(function(){return e.eventKey}),selectHandle:ae,pos:te,key:ve.vnode.key});g(se);var Ke=function(l){var s=o.value.onNodeDoubleClick;s(l,ee.value)},je=function(l){if(!H.value){var s=o.value.onNodeSelect;l.preventDefault(),s(l,ee.value)}},Ie=function(l){if(!H.value){var s=e.disableCheckbox,A=o.value.onNodeCheck;if(!(!z.value||s)){l.preventDefault();var h=!$.value;A(l,ee.value,h)}}},Be=function(l){var s=o.value.onNodeClick;s(l,ee.value),ue.value?je(l):Ie(l)},Ue=function(l){var s=o.value.onNodeMouseEnter;s(l,ee.value)},qe=function(l){var s=o.value.onNodeMouseLeave;s(l,ee.value)},ze=function(l){var s=o.value.onNodeContextMenu;s(l,ee.value)},Xe=function(l){var s=o.value.onNodeDragStart;l.stopPropagation(),f.value=!0,s(l,se);try{l.dataTransfer.setData("text/plain","")}catch{}},Je=function(l){var s=o.value.onNodeDragEnter;l.preventDefault(),l.stopPropagation(),s(l,se)},Qe=function(l){var s=o.value.onNodeDragOver;l.preventDefault(),l.stopPropagation(),s(l,se)},Ze=function(l){var s=o.value.onNodeDragLeave;l.stopPropagation(),s(l,se)},Re=function(l){var s=o.value.onNodeDragEnd;l.stopPropagation(),f.value=!1,s(l,se)},Ge=function(l){var s=o.value.onNodeDrop;l.preventDefault(),l.stopPropagation(),f.value=!1,s(l,se)},$e=function(l){var s=o.value.onNodeExpand;R.value||s(l,ee.value)},en=function(){var l=e.data,s=o.value.draggable;return!!(s&&(!s.nodeDraggable||s.nodeDraggable(l)))},nn=function(){var l=o.value,s=l.draggable,A=l.prefixCls;return s!=null&&s.icon?_("span",{class:"".concat(A,"-draggable-icon")},[s.icon]):null},an=function(){var l,s,A,h=e.switcherIcon,d=h===void 0?t.switcherIcon||((l=o.value.slots)===null||l===void 0?void 0:l[(A=(s=e.data)===null||s===void 0?void 0:s.slots)===null||A===void 0?void 0:A.switcherIcon]):h,u=o.value.switcherIcon,c=d||u;return typeof c=="function"?c(he.value):c},He=function(){var l=o.value,s=l.loadData,A=l.onNodeLoad;R.value||s&&j.value&&!oe.value&&!re.value&&!ne.value&&A(ee.value)};Ln(function(){He()}),ea(function(){He()});var tn=function(){var l=o.value.prefixCls,s=an();if(oe.value)return s!==!1?_("span",{class:Ce("".concat(l,"-switcher"),"".concat(l,"-switcher-noop"))},[s]):null;var A=Ce("".concat(l,"-switcher"),"".concat(l,"-switcher_").concat(j.value?gn:pn));return s!==!1?_("span",{onClick:$e,class:A},[s]):null},Pe=function(){var l,s,A=e.disableCheckbox,h=o.value.prefixCls,d=H.value,u=z.value;return u?_("span",{class:Ce("".concat(h,"-checkbox"),$.value&&"".concat(h,"-checkbox-checked"),!$.value&&L.value&&"".concat(h,"-checkbox-indeterminate"),(d||A)&&"".concat(h,"-checkbox-disabled")),onClick:Ie},[(s=(l=o.value).customCheckable)===null||s===void 0?void 0:s.call(l)]):null},Ve=function(){var l=o.value.prefixCls;return _("span",{class:Ce("".concat(l,"-iconEle"),"".concat(l,"-icon__").concat(ye.value||"docu"),R.value&&"".concat(l,"-icon_loading"))},null)},rn=function(){var l=e.disabled,s=e.eventKey,A=o.value,h=A.draggable,d=A.dropLevelOffset,u=A.dropPosition,c=A.prefixCls,T=A.indent,P=A.dropIndicatorRender,D=A.dragOverNodeKey,C=A.direction,O=h!==!1,I=!l&&O&&D===s;return I?P({dropPosition:u,dropLevelOffset:d,indent:T,prefixCls:c,direction:C}):null},ke=function(){var l,s,A,h,d,u,c=e.icon,T=c===void 0?t.icon:c,P=e.data,D=t.title||((l=o.value.slots)===null||l===void 0?void 0:l[(A=(s=e.data)===null||s===void 0?void 0:s.slots)===null||A===void 0?void 0:A.title])||((h=o.value.slots)===null||h===void 0?void 0:h.title)||e.title,C=o.value,O=C.prefixCls,I=C.showIcon,G=C.icon,V=C.loadData,Y=H.value,J="".concat(O,"-node-content-wrapper"),X;if(I){var ce=T||((d=o.value.slots)===null||d===void 0?void 0:d[(u=P==null?void 0:P.slots)===null||u===void 0?void 0:u.icon])||G;X=ce?_("span",{class:Ce("".concat(O,"-iconEle"),"".concat(O,"-icon__customize"))},[typeof ce=="function"?ce(he.value):ce]):Ve()}else V&&R.value&&(X=Ve());var le;typeof D=="function"?le=D(he.value):le=D,le=le===void 0?Oa:le;var U=_("span",{class:"".concat(O,"-title")},[le]);return _("span",{ref:ae,title:typeof D=="string"?D:"",class:Ce("".concat(J),"".concat(J,"-").concat(ye.value||"normal"),!Y&&(F.value||f.value)&&"".concat(O,"-node-selected")),onMouseenter:Ue,onMouseleave:qe,onContextmenu:ze,onClick:Be,onDblclick:Ke},[X,U,rn()])};return function(){var b,l=B(B({},e),a),s=l.eventKey,A=l.isLeaf,h=l.isStart,d=l.isEnd,u=l.domRef,c=l.active;l.data;var T=l.onMousemove,P=l.selectable,D=Ea(l,["eventKey","isLeaf","isStart","isEnd","domRef","active","data","onMousemove","selectable"]),C=o.value,O=C.prefixCls,I=C.filterTreeNode,G=C.keyEntities,V=C.dropContainerKey,Y=C.dropTargetKey,J=C.draggingNodeKey,X=H.value,ce=Mn(D,{aria:!0,data:!0}),le=G[s]||{},U=le.level,ge=d[d.length-1],pe=en(),me=!X&&pe,We=J===s,on=P!==void 0?{"aria-selected":!!P}:void 0;return _("div",fe(fe({ref:u,class:Ce(a.class,"".concat(O,"-treenode"),(b={},q(b,"".concat(O,"-treenode-disabled"),X),q(b,"".concat(O,"-treenode-switcher-").concat(j.value?"open":"close"),!A),q(b,"".concat(O,"-treenode-checkbox-checked"),$.value),q(b,"".concat(O,"-treenode-checkbox-indeterminate"),L.value),q(b,"".concat(O,"-treenode-selected"),F.value),q(b,"".concat(O,"-treenode-loading"),R.value),q(b,"".concat(O,"-treenode-active"),c),q(b,"".concat(O,"-treenode-leaf-last"),ge),q(b,"".concat(O,"-treenode-draggable"),me),q(b,"dragging",We),q(b,"drop-target",Y===s),q(b,"drop-container",V===s),q(b,"drag-over",!X&&Z.value),q(b,"drag-over-gap-top",!X&&de.value),q(b,"drag-over-gap-bottom",!X&&W.value),q(b,"filter-node",I&&I(ee.value)),b)),style:a.style,draggable:me,"aria-grabbed":We,onDragstart:me?Xe:void 0,onDragenter:pe?Je:void 0,onDragover:pe?Qe:void 0,onDragleave:pe?Ze:void 0,onDrop:pe?Ge:void 0,onDragend:pe?Re:void 0,onMousemove:T},on),ce),[_(Sa,{prefixCls:O,level:U,isStart:h,isEnd:d},null),nn(),tn(),Pe(),ke()])}}});globalThis&&globalThis.__rest;function xe(n,e){if(!n)return[];var r=n.slice(),a=r.indexOf(e);return a>=0&&r.splice(a,1),r}function Se(n,e){var r=(n||[]).slice();return r.indexOf(e)===-1&&r.push(e),r}function yn(n){return n.split("-")}function Rn(n,e){return"".concat(n,"-").concat(e)}function wa(n){return n&&n.type&&n.type.isTreeNode}function Pa(n,e){var r=[],a=e[n];function t(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];g.forEach(function(f){var o=f.key,K=f.children;r.push(o),t(K)})}return t(a.children),r}function Ta(n){if(n.parent){var e=yn(n.pos);return Number(e[e.length-1])===n.parent.children.length-1}return!1}function La(n){var e=yn(n.pos);return Number(e[e.length-1])===0}function Kn(n,e,r,a,t,g,f,o,K,v){var N,p=n.clientX,y=n.clientY,S=n.target.getBoundingClientRect(),m=S.top,E=S.height,i=(v==="rtl"?-1:1)*(((t==null?void 0:t.x)||0)-p),k=(i-12)/a,x=o[r.eventKey];if(y<m+E/2){var w=f.findIndex(function(re){return re.key===x.key}),j=w<=0?0:w-1,F=f[j].key;x=o[F]}var $=x.key,ne=x,R=x.key,L=0,Z=0;if(!K.has($))for(var de=0;de<k&&Ta(x);de+=1)x=x.parent,Z+=1;var W=e.eventData,te=x.node,ae=!0;return La(x)&&x.level===0&&y<m+E/2&&g({dragNode:W,dropNode:te,dropPosition:-1})&&x.key===r.eventKey?L=-1:(ne.children||[]).length&&K.has(R)?g({dragNode:W,dropNode:te,dropPosition:0})?L=0:ae=!1:Z===0?k>-1.5?g({dragNode:W,dropNode:te,dropPosition:1})?L=1:ae=!1:g({dragNode:W,dropNode:te,dropPosition:0})?L=0:g({dragNode:W,dropNode:te,dropPosition:1})?L=1:ae=!1:g({dragNode:W,dropNode:te,dropPosition:1})?L=1:ae=!1,{dropPosition:L,dropLevelOffset:Z,dropTargetKey:x.key,dropTargetPos:x.pos,dragOverNodeKey:R,dropContainerKey:L===0?null:((N=x.parent)===null||N===void 0?void 0:N.key)||null,dropAllowed:ae}}function kn(n,e){if(!!n){var r=e.multiple;return r?n.slice():n.length?[n[0]]:n}}function dn(n){if(!n)return null;var e;if(Array.isArray(n))e={checkedKeys:n,halfCheckedKeys:void 0};else if(Ae(n)==="object")e={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return Oe(!1,"`checkedKeys` is not an array or an object"),null;return e}function mn(n,e){var r=new Set;function a(t){if(!r.has(t)){var g=e[t];if(!!g){r.add(t);var f=g.parent,o=g.node;o.disabled||f&&a(f.key)}}}return(n||[]).forEach(function(t){a(t)}),Le(r)}var Ia=globalThis&&globalThis.__rest||function(n,e){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(n);t<a.length;t++)e.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(n,a[t])&&(r[a[t]]=n[a[t]]);return r};function _e(n,e){return n!=null?n:e}function hn(n){var e=n||{},r=e.title,a=e._title,t=e.key,g=e.children,f=r||"title";return{title:f,_title:a||[f],key:t||"key",children:g||"children"}}function Aa(n){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=aa(r);return a.map(function(t){var g,f,o,K;if(!wa(t))return Oe(!t,"Tree/TreeNode can only accept TreeNode as children."),null;for(var v=t.children||{},N=t.key,p={},y=0,S=Object.entries(t.props);y<S.length;y++){var m=Me(S[y],2),E=m[0],i=m[1];p[ta(E)]=i}var k=p.isLeaf,x=p.checkable,w=p.selectable,j=p.disabled,F=p.disableCheckbox,$={isLeaf:k||k===""||void 0,checkable:x||x===""||void 0,selectable:w||w===""||void 0,disabled:j||j===""||void 0,disableCheckbox:F||F===""||void 0},ne=B(B({},p),$),R=p.title,L=R===void 0?(g=v.title)===null||g===void 0?void 0:g.call(v,ne):R,Z=p.icon,de=Z===void 0?(f=v.icon)===null||f===void 0?void 0:f.call(v,ne):Z,W=p.switcherIcon,te=W===void 0?(o=v.switcherIcon)===null||o===void 0?void 0:o.call(v,ne):W,ae=Ia(p,["title","icon","switcherIcon"]),re=(K=v.default)===null||K===void 0?void 0:K.call(v),oe=B(B(B({},ae),{title:L,icon:de,switcherIcon:te,key:N,isLeaf:k}),$),ye=e(re);return ye.length&&(oe.children=ye),oe})}return e(n)}function Ma(n,e,r){var a=hn(r),t=a._title,g=a.key,f=a.children,o=new Set(e===!0?[]:e),K=[];function v(N){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return N.map(function(y,S){for(var m=Rn(p?p.pos:"0",S),E=_e(y[g],m),i,k=0;k<t.length;k+=1){var x=t[k];if(y[x]!==void 0){i=y[x];break}}var w=B(B({},An(y,[].concat(Le(t),[g,f]))),{title:i,key:E,parent:p,pos:m,children:null,data:y,isStart:[].concat(Le(p?p.isStart:[]),[S===0]),isEnd:[].concat(Le(p?p.isEnd:[]),[S===N.length-1])});return K.push(w),e===!0||o.has(E)?w.children=v(y[f]||[],w):w.children=[],w})}return v(n),K}function Fa(n,e,r){var a={};Ae(r)==="object"?a=r:a={externalGetKey:r},a=a||{};var t=a,g=t.childrenPropName,f=t.externalGetKey,o=t.fieldNames,K=hn(o),v=K.key,N=K.children,p=g||N,y;f?typeof f=="string"?y=function(E){return E[f]}:typeof f=="function"&&(y=function(E){return f(E)}):y=function(E,i){return _e(E[v],i)};function S(m,E,i,k){var x=m?m[p]:n,w=m?Rn(i.pos,E):"0",j=m?[].concat(Le(k),[m]):[];if(m){var F=y(m,w),$={node:m,index:E,pos:w,key:F,parentPos:i.node?i.pos:null,level:i.level+1,nodes:j};e($)}x&&x.forEach(function(ne,R){S(ne,R,{node:m,pos:w,level:i?i.level+1:-1},j)})}S(null)}function _a(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.initWrapper,a=e.processEntity,t=e.onProcessFinished,g=e.externalGetKey,f=e.childrenPropName,o=e.fieldNames,K=arguments.length>2?arguments[2]:void 0,v=g||K,N={},p={},y={posEntities:N,keyEntities:p};return r&&(y=r(y)||y),Fa(n,function(S){var m=S.node,E=S.index,i=S.pos,k=S.key,x=S.parentPos,w=S.level,j=S.nodes,F={node:m,nodes:j,index:E,key:k,pos:i,level:w},$=_e(k,i);N[i]=F,p[$]=F,F.parent=N[x],F.parent&&(F.parent.children=F.parent.children||[],F.parent.children.push(F)),a&&a(F,y)},{externalGetKey:v,childrenPropName:f,fieldNames:o}),t&&t(y),y}function cn(n,e){var r=e.expandedKeysSet,a=e.selectedKeysSet,t=e.loadedKeysSet,g=e.loadingKeysSet,f=e.checkedKeysSet,o=e.halfCheckedKeysSet,K=e.dragOverNodeKey,v=e.dropPosition,N=e.keyEntities,p=N[n],y={eventKey:n,expanded:r.has(n),selected:a.has(n),loaded:t.has(n),loading:g.has(n),checked:f.has(n),halfChecked:o.has(n),pos:String(p?p.pos:""),parent:p.parent,dragOver:K===n&&v===0,dragOverGapTop:K===n&&v===-1,dragOverGapBottom:K===n&&v===1};return y}function vn(n){var e=n.data,r=n.expanded,a=n.selected,t=n.checked,g=n.loaded,f=n.loading,o=n.halfChecked,K=n.dragOver,v=n.dragOverGapTop,N=n.dragOverGapBottom,p=n.pos,y=n.active,S=n.eventKey,m=B(B({dataRef:e},e),{expanded:r,selected:a,checked:t,loaded:g,loading:f,halfChecked:o,dragOver:K,dragOverGapTop:v,dragOverGapBottom:N,pos:p,active:y,eventKey:S,key:S});return"props"in m||Object.defineProperty(m,"props",{get:function(){return Oe(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),n}}),m}function Gn(n,e){var r=new Set;return n.forEach(function(a){e.has(a)||r.add(a)}),r}function ja(n){var e=n||{},r=e.disabled,a=e.disableCheckbox,t=e.checkable;return!!(r||a)||t===!1}function Ba(n,e,r,a){for(var t=new Set(n),g=new Set,f=0;f<=r;f+=1){var o=e.get(f)||new Set;o.forEach(function(p){var y=p.key,S=p.node,m=p.children,E=m===void 0?[]:m;t.has(y)&&!a(S)&&E.filter(function(i){return!a(i.node)}).forEach(function(i){t.add(i.key)})})}for(var K=new Set,v=r;v>=0;v-=1){var N=e.get(v)||new Set;N.forEach(function(p){var y=p.parent,S=p.node;if(!(a(S)||!p.parent||K.has(p.parent.key))){if(a(p.parent.node)){K.add(y.key);return}var m=!0,E=!1;(y.children||[]).filter(function(i){return!a(i.node)}).forEach(function(i){var k=i.key,x=t.has(k);m&&!x&&(m=!1),!E&&(x||g.has(k))&&(E=!0)}),m&&t.add(y.key),E&&g.add(y.key),K.add(y.key)}})}return{checkedKeys:Array.from(t),halfCheckedKeys:Array.from(Gn(g,t))}}function Ra(n,e,r,a,t){for(var g=new Set(n),f=new Set(e),o=0;o<=a;o+=1){var K=r.get(o)||new Set;K.forEach(function(y){var S=y.key,m=y.node,E=y.children,i=E===void 0?[]:E;!g.has(S)&&!f.has(S)&&!t(m)&&i.filter(function(k){return!t(k.node)}).forEach(function(k){g.delete(k.key)})})}f=new Set;for(var v=new Set,N=a;N>=0;N-=1){var p=r.get(N)||new Set;p.forEach(function(y){var S=y.parent,m=y.node;if(!(t(m)||!y.parent||v.has(y.parent.key))){if(t(y.parent.node)){v.add(S.key);return}var E=!0,i=!1;(S.children||[]).filter(function(k){return!t(k.node)}).forEach(function(k){var x=k.key,w=g.has(x);E&&!w&&(E=!1),!i&&(w||f.has(x))&&(i=!0)}),E||g.delete(S.key),i&&f.add(S.key),v.add(S.key)}})}return{checkedKeys:Array.from(g),halfCheckedKeys:Array.from(Gn(f,g))}}function un(n,e,r,a,t,g){var f=[],o;g?o=g:o=ja;var K=new Set(n.filter(function(N){var p=!!r[N];return p||f.push(N),p}));ra(!f.length,"Tree missing follow keys: ".concat(f.slice(0,100).map(function(N){return"'".concat(N,"'")}).join(", ")));var v;return e===!0?v=Ba(K,t,a,o):v=Ra(K,e.halfCheckedKeys,t,a,o),v}function Ga(n){var e=ie(0),r=Q();return Ne(function(){var a=new Map,t=0,g=n.value||{};for(var f in g)if(Object.prototype.hasOwnProperty.call(g,f)){var o=g[f],K=o.level,v=a.get(K);v||(v=new Set,a.set(K,v)),v.add(o),t=Math.max(t,K)}e.value=t,r.value=a}),{maxLevel:e,levelEntities:r}}var xn=globalThis&&globalThis.__rest||function(n,e){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(n);t<a.length;t++)e.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(n,a[t])&&(r[a[t]]=n[a[t]]);return r};const $a=Fe({name:"MotionTreeNode",inheritAttrs:!1,props:B(B({},Bn),{active:Boolean,motion:Object,motionNodes:{type:Array},onMotionStart:Function,onMotionEnd:Function,motionType:String}),slots:["title","icon","switcherIcon","checkable"],setup:function(e,r){var a=r.attrs,t=r.slots,g=ie(!0),f=fn(),o=ie(!1),K=M(function(){return e.motion?e.motion:Ka()}),v=function(p,y){var S,m,E,i;y==="appear"?(m=(S=K.value)===null||S===void 0?void 0:S.onAfterEnter)===null||m===void 0||m.call(S,p):y==="leave"&&((i=(E=K.value)===null||E===void 0?void 0:E.onAfterLeave)===null||i===void 0||i.call(E,p)),o.value||e.onMotionEnd(),o.value=!0};return Ee(function(){return e.motionNodes},function(){e.motionNodes&&e.motionType==="hide"&&g.value&&In(function(){g.value=!1})},{immediate:!0,flush:"post"}),Ln(function(){e.motionNodes&&e.onMotionStart()}),oa(function(){e.motionNodes&&v()}),function(){e.motion;var N=e.motionNodes,p=e.motionType,y=e.active,S=e.eventKey,m=xn(e,["motion","motionNodes","motionType","active","eventKey"]);return N?_(da,fe(fe({},K.value),{},{appear:p==="show",onAfterAppear:function(i){return v(i,"appear")},onAfterLeave:function(i){return v(i,"leave")}}),{default:function(){return[la(_("div",{class:"".concat(f.value.prefixCls,"-treenode-motion")},[N.map(function(i){var k=xn(i.data,[]),x=i.title,w=i.key,j=i.isStart,F=i.isEnd;return delete k.children,_(bn,fe(fe({},k),{},{title:x,active:y,data:i.data,key:w,eventKey:w,isStart:j,isEnd:F}),t)})]),[[ia,g.value]])]}}):_(bn,fe(fe({domRef:ie,class:a.class,style:a.style},m),{},{active:y,eventKey:S}),t)}}});function Ha(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n.length,a=e.length;if(Math.abs(r-a)!==1)return{add:!1,key:null};function t(g,f){var o=new Map;g.forEach(function(v){o.set(v,!0)});var K=f.filter(function(v){return!o.has(v)});return K.length===1?K[0]:null}return r<a?{add:!0,key:t(n,e)}:{add:!1,key:t(e,n)}}function Cn(n,e,r){var a=n.findIndex(function(o){return o.key===r}),t=n[a+1],g=e.findIndex(function(o){return o.key===r});if(t){var f=e.findIndex(function(o){return o.key===t.key});return e.slice(g+1,f)}return e.slice(g+1)}var Sn=globalThis&&globalThis.__rest||function(n,e){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(n);t<a.length;t++)e.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(n,a[t])&&(r[a[t]]=n[a[t]]);return r},Nn={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Va=function(){},we="RC_TREE_MOTION_".concat(Math.random()),sn={key:we},$n={key:we,level:0,index:0,pos:"0",node:sn,nodes:[sn]},Dn={parent:null,children:[],pos:$n.pos,data:sn,title:null,key:we,isStart:[],isEnd:[]};function En(n,e,r,a){return e===!1||!r?n:n.slice(0,Math.ceil(r/a)+1)}function On(n){var e=n.key,r=n.pos;return _e(e,r)}function Wa(n){for(var e=String(n.key),r=n;r.parent;)r=r.parent,e="".concat(r.key," > ").concat(e);return e}const Ya=Fe({name:"NodeList",inheritAttrs:!1,props:Na,setup:function(e,r){var a=r.expose,t=r.attrs,g=ie(),f=ie(),o=jn(),K=o.expandedKeys,v=o.flattenNodes;a({scrollTo:function(x){g.value.scrollTo(x)},getIndentWidth:function(){return f.value.offsetWidth}});var N=Q(v.value),p=Q([]),y=ie(null);function S(){N.value=v.value,p.value=[],y.value=null,e.onListChangeEnd()}var m=fn();Ee([function(){return K.value.slice()},v],function(k,x){var w=Me(k,2),j=w[0],F=w[1],$=Me(x,2),ne=$[0],R=$[1],L=Ha(ne,j);if(L.key!==null){var Z=e.virtual,de=e.height,W=e.itemHeight;if(L.add){var te=R.findIndex(function(z){var ue=z.key;return ue===L.key}),ae=En(Cn(R,F,L.key),Z,de,W),re=R.slice();re.splice(te+1,0,Dn),N.value=re,p.value=ae,y.value="show"}else{var oe=F.findIndex(function(z){var ue=z.key;return ue===L.key}),ye=En(Cn(F,R,L.key),Z,de,W),H=F.slice();H.splice(oe+1,0,Dn),N.value=H,p.value=ye,y.value="hide"}}else R!==F&&(N.value=F)}),Ee(function(){return m.value.dragging},function(k){k||S()});var E=M(function(){return e.motion===void 0?N.value:v.value}),i=function(){e.onActiveChange(null)};return function(){var k=B(B({},e),t),x=k.prefixCls;k.selectable,k.checkable;var w=k.disabled,j=k.motion,F=k.height,$=k.itemHeight,ne=k.virtual,R=k.focusable,L=k.activeItem,Z=k.focused,de=k.tabindex,W=k.onKeydown,te=k.onFocus,ae=k.onBlur,re=k.onListChangeStart;k.onListChangeEnd;var oe=Sn(k,["prefixCls","selectable","checkable","disabled","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabindex","onKeydown","onFocus","onBlur","onListChangeStart","onListChangeEnd"]);return _(ua,null,[Z&&L&&_("span",{style:Nn,"aria-live":"assertive"},[Wa(L)]),_("div",null,[_("input",{style:Nn,disabled:R===!1||w,tabindex:R!==!1?de:null,onKeydown:W,onFocus:te,onBlur:ae,value:"",onChange:Va,"aria-label":"for screen reader"},null)]),_("div",{class:"".concat(x,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},[_("div",{class:"".concat(x,"-indent")},[_("div",{ref:f,class:"".concat(x,"-indent-unit")},null)])]),_(ka,fe(fe({},An(oe,["onActiveChange"])),{},{data:E.value,itemKey:On,height:F,fullHeight:!1,virtual:ne,itemHeight:$,prefixCls:"".concat(x,"-list"),ref:g,onVisibleChange:function(H,z){var ue=new Set(H),he=z.filter(function(ve){return!ue.has(ve)});he.some(function(ve){return On(ve)===we})&&S()}}),{default:function(H){var z=H.pos,ue=Sn(H.data,[]),he=H.title,ve=H.key,ee=H.isStart,se=H.isEnd,Ke=_e(ve,z);return delete ue.key,delete ue.children,_($a,fe(fe({},ue),{},{eventKey:Ke,title:he,active:!!L&&ve===L.key,data:H.data,isStart:ee,isEnd:se,motion:j,motionNodes:ve===we?p.value:null,motionType:y.value,onMotionStart:re,onMotionEnd:S,onMousemove:i}),null)}})])}}});function Ua(n){var e=n.dropPosition,r=n.dropLevelOffset,a=n.indent,t={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:"".concat(2,"px")};switch(e){case-1:t.top=0,t.left="".concat(-r*a,"px");break;case 1:t.bottom=0,t.left="".concat(-r*a,"px");break;case 0:t.bottom=0,t.left="".concat(a);break}return _("div",{style:t},null)}var qa=10;const nt=Fe({name:"Tree",inheritAttrs:!1,slots:["checkable","title","icon","titleRender"],props:ca(Da(),{prefixCls:"vc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Ua,allowDrop:function(){return!0}}),setup:function(e,r){var a=r.attrs,t=r.slots,g=r.expose,f=ie(!1),o={},K=ie(),v=Q([]),N=Q([]),p=Q([]),y=Q([]),S=Q([]),m=Q([]),E={},i=Tn({draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null}),k=Q([]);Ee([function(){return e.treeData},function(){return e.children}],function(){k.value=e.treeData!==void 0?ln(e.treeData).slice():Aa(ln(e.children))},{immediate:!0,deep:!0});var x=Q({}),w=ie(!1),j=ie(null),F=ie(!1),$=M(function(){return hn(e.fieldNames)}),ne=ie(),R=null,L=null,Z=null,de=M(function(){return{expandedKeysSet:W.value,selectedKeysSet:te.value,loadedKeysSet:ae.value,loadingKeysSet:re.value,checkedKeysSet:oe.value,halfCheckedKeysSet:ye.value,dragOverNodeKey:i.dragOverNodeKey,dropPosition:i.dropPosition,keyEntities:x.value}}),W=M(function(){return new Set(m.value)}),te=M(function(){return new Set(v.value)}),ae=M(function(){return new Set(y.value)}),re=M(function(){return new Set(S.value)}),oe=M(function(){return new Set(N.value)}),ye=M(function(){return new Set(p.value)});Ne(function(){if(k.value){var h=_a(k.value,{fieldNames:$.value});x.value=B(q({},we,$n),h.keyEntities)}});var H=!1;Ee([function(){return e.expandedKeys},function(){return e.autoExpandParent},x],function(h,d){var u=Me(h,2);u[0];var c=u[1],T=Me(d,2);T[0];var P=T[1],D=m.value;if(e.expandedKeys!==void 0||H&&c!==P)D=e.autoExpandParent||!H&&e.defaultExpandParent?mn(e.expandedKeys,x.value):e.expandedKeys;else if(!H&&e.defaultExpandAll){var C=B({},x.value);delete C[we],D=Object.keys(C).map(function(O){return C[O].key})}else!H&&e.defaultExpandedKeys&&(D=e.autoExpandParent||e.defaultExpandParent?mn(e.defaultExpandedKeys,x.value):e.defaultExpandedKeys);D&&(m.value=D),H=!0},{immediate:!0});var z=Q([]);Ne(function(){z.value=Ma(k.value,m.value,$.value)}),Ne(function(){e.selectable&&(e.selectedKeys!==void 0?v.value=kn(e.selectedKeys,e):!H&&e.defaultSelectedKeys&&(v.value=kn(e.defaultSelectedKeys,e)))});var ue=Ga(x),he=ue.maxLevel,ve=ue.levelEntities;Ne(function(){if(e.checkable){var h;if(e.checkedKeys!==void 0?h=dn(e.checkedKeys)||{}:!H&&e.defaultCheckedKeys?h=dn(e.defaultCheckedKeys)||{}:k.value&&(h=dn(e.checkedKeys)||{checkedKeys:N.value,halfCheckedKeys:p.value}),h){var d=h,u=d.checkedKeys,c=u===void 0?[]:u,T=d.halfCheckedKeys,P=T===void 0?[]:T;if(!e.checkStrictly){var D=un(c,!0,x.value,he.value,ve.value);c=D.checkedKeys,P=D.halfCheckedKeys}N.value=c,p.value=P}}}),Ne(function(){e.loadedKeys&&(y.value=e.loadedKeys)});var ee=function(){B(i,{dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})},se=function(d){ne.value.scrollTo(d)};Ee(function(){return e.activeKey},function(){e.activeKey!==void 0&&(j.value=e.activeKey)},{immediate:!0}),Ee(j,function(h){In(function(){h!==null&&se({key:h})})},{immediate:!0,flush:"post"});var Ke=function(d){e.expandedKeys===void 0&&(m.value=d)},je=function(){i.draggingNodeKey!==null&&B(i,{draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),R=null,Z=null},Ie=function(d,u){var c=e.onDragend;i.dragOverNodeKey=null,je(),c==null||c({event:d,node:u.eventData}),L=null},Be=function h(d){Ie(d,null),window.removeEventListener("dragend",h)},Ue=function(d,u){var c=e.onDragstart,T=u.eventKey,P=u.eventData;L=u,R={x:d.clientX,y:d.clientY};var D=xe(m.value,T);i.draggingNodeKey=T,i.dragChildrenKeys=Pa(T,x.value),K.value=ne.value.getIndentWidth(),Ke(D),window.addEventListener("dragend",Be),c&&c({event:d,node:P})},qe=function(d,u){var c=e.onDragenter,T=e.onExpand,P=e.allowDrop,D=e.direction,C=u.pos,O=u.eventKey;if(Z!==O&&(Z=O),!L){ee();return}var I=Kn(d,L,u,K.value,R,P,z.value,x.value,W.value,D),G=I.dropPosition,V=I.dropLevelOffset,Y=I.dropTargetKey,J=I.dropContainerKey,X=I.dropTargetPos,ce=I.dropAllowed,le=I.dragOverNodeKey;if(i.dragChildrenKeys.indexOf(Y)!==-1||!ce){ee();return}if(o||(o={}),Object.keys(o).forEach(function(U){clearTimeout(o[U])}),L.eventKey!==u.eventKey&&(o[C]=window.setTimeout(function(){if(i.draggingNodeKey!==null){var U=m.value.slice(),ge=x.value[u.eventKey];ge&&(ge.children||[]).length&&(U=Se(m.value,u.eventKey)),Ke(U),T&&T(U,{node:u.eventData,expanded:!0,nativeEvent:d})}},800)),L.eventKey===Y&&V===0){ee();return}B(i,{dragOverNodeKey:le,dropPosition:G,dropLevelOffset:V,dropTargetKey:Y,dropContainerKey:J,dropTargetPos:X,dropAllowed:ce}),c&&c({event:d,node:u.eventData,expandedKeys:m.value})},ze=function(d,u){var c=e.onDragover,T=e.allowDrop,P=e.direction;if(!!L){var D=Kn(d,L,u,K.value,R,T,z.value,x.value,W.value,P),C=D.dropPosition,O=D.dropLevelOffset,I=D.dropTargetKey,G=D.dropContainerKey,V=D.dropAllowed,Y=D.dropTargetPos,J=D.dragOverNodeKey;i.dragChildrenKeys.indexOf(I)!==-1||!V||(L.eventKey===I&&O===0?i.dropPosition===null&&i.dropLevelOffset===null&&i.dropTargetKey===null&&i.dropContainerKey===null&&i.dropTargetPos===null&&i.dropAllowed===!1&&i.dragOverNodeKey===null||ee():C===i.dropPosition&&O===i.dropLevelOffset&&I===i.dropTargetKey&&G===i.dropContainerKey&&Y===i.dropTargetPos&&V===i.dropAllowed&&J===i.dragOverNodeKey||B(i,{dropPosition:C,dropLevelOffset:O,dropTargetKey:I,dropContainerKey:G,dropTargetPos:Y,dropAllowed:V,dragOverNodeKey:J}),c&&c({event:d,node:u.eventData}))}},Xe=function(d,u){Z===u.eventKey&&!d.currentTarget.contains(d.relatedTarget)&&(ee(),Z=null);var c=e.onDragleave;c&&c({event:d,node:u.eventData})},Je=function(d,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,T,P=i.dragChildrenKeys,D=i.dropPosition,C=i.dropTargetKey,O=i.dropTargetPos,I=i.dropAllowed;if(!!I){var G=e.onDrop;if(i.dragOverNodeKey=null,je(),C!==null){var V=B(B({},cn(C,ln(de.value))),{active:((T=b.value)===null||T===void 0?void 0:T.key)===C,data:x.value[C].node}),Y=P.indexOf(C)!==-1;Oe(!Y,"Can not drop to dragNode's children node. Maybe this is a bug of ant-design-vue. Please report an issue.");var J=yn(O),X={event:d,node:vn(V),dragNode:L?L.eventData:null,dragNodesKeys:[L.eventKey].concat(P),dropToGap:D!==0,dropPosition:D+Number(J[J.length-1])};c||G==null||G(X),L=null}}},Qe=function(d,u){var c=e.onClick;c&&c(d,u)},Ze=function(d,u){var c=e.onDblclick;c&&c(d,u)},Re=function(d,u){var c=v.value,T=e.onSelect,P=e.multiple,D=u.selected,C=u[$.value.key],O=!D;O?P?c=Se(c,C):c=[C]:c=xe(c,C);var I=x.value,G=c.map(function(V){var Y=I[V];return Y?Y.node:null}).filter(function(V){return V});e.selectedKeys===void 0&&(v.value=c),T&&T(c,{event:"select",selected:O,node:u,selectedNodes:G,nativeEvent:d})},Ge=function(d,u,c){var T=e.checkStrictly,P=e.onCheck,D=u[$.value.key],C,O={event:"check",node:u,checked:c,nativeEvent:d},I=x.value;if(T){var G=c?Se(N.value,D):xe(N.value,D),V=xe(p.value,D);C={checked:G,halfChecked:V},O.checkedNodes=G.map(function(U){return I[U]}).filter(function(U){return U}).map(function(U){return U.node}),e.checkedKeys===void 0&&(N.value=G)}else{var Y=un([].concat(Le(N.value),[D]),!0,I,he.value,ve.value),J=Y.checkedKeys,X=Y.halfCheckedKeys;if(!c){var ce=new Set(J);ce.delete(D);var le=un(Array.from(ce),{checked:!1,halfCheckedKeys:X},I,he.value,ve.value);J=le.checkedKeys,X=le.halfCheckedKeys}C=J,O.checkedNodes=[],O.checkedNodesPositions=[],O.halfCheckedKeys=X,J.forEach(function(U){var ge=I[U];if(!!ge){var pe=ge.node,me=ge.pos;O.checkedNodes.push(pe),O.checkedNodesPositions.push({node:pe,pos:me})}}),e.checkedKeys===void 0&&(N.value=J,p.value=X)}P&&P(C,O)},$e=function(d){var u=d[$.value.key],c=new Promise(function(T,P){var D=e.loadData,C=e.onLoad;if(!D||ae.value.has(u)||re.value.has(u))return null;var O=D(d);O.then(function(){var I=Se(y.value,u),G=xe(S.value,u);C&&C(I,{event:"load",node:d}),e.loadedKeys===void 0&&(y.value=I),S.value=G,T()}).catch(function(I){var G=xe(S.value,u);if(S.value=G,E[u]=(E[u]||0)+1,E[u]>=qa){Oe(!1,"Retry for `loadData` many times but still failed. No more retry.");var V=Se(y.value,u);e.loadedKeys===void 0&&(y.value=V),T()}P(I)}),S.value=Se(S.value,u)});return c.catch(function(){}),c},en=function(d,u){var c=e.onMouseenter;c&&c({event:d,node:u})},nn=function(d,u){var c=e.onMouseleave;c&&c({event:d,node:u})},an=function(d,u){var c=e.onRightClick;c&&(d.preventDefault(),c({event:d,node:u}))},He=function(d){var u=e.onFocus;w.value=!0,u&&u(d)},tn=function(d){var u=e.onBlur;w.value=!1,ke(null),u&&u(d)},Pe=function(d,u){var c=m.value,T=e.onExpand,P=e.loadData,D=u.expanded,C=u[$.value.key];if(!F.value){var O=c.indexOf(C),I=!D;if(Oe(D&&O!==-1||!D&&O===-1,"Expand state not sync with index check"),I?c=Se(c,C):c=xe(c,C),Ke(c),T&&T(c,{node:u,expanded:I,nativeEvent:d}),I&&P){var G=$e(u);G&&G.then(function(){}).catch(function(V){var Y=xe(m.value,C);Ke(Y),Promise.reject(V)})}}},Ve=function(){F.value=!0},rn=function(){setTimeout(function(){F.value=!1})},ke=function(d){var u=e.onActiveChange;j.value!==d&&(e.activeKey!==void 0&&(j.value=d),d!==null&&se({key:d}),u&&u(d))},b=M(function(){return j.value===null?null:z.value.find(function(h){var d=h.key;return d===j.value})||null}),l=function(d){var u=z.value.findIndex(function(P){var D=P.key;return D===j.value});u===-1&&d<0&&(u=z.value.length),u=(u+d+z.value.length)%z.value.length;var c=z.value[u];if(c){var T=c.key;ke(T)}else ke(null)},s=M(function(){return vn(B(B({},cn(j.value,de.value)),{data:b.value.data,active:!0}))}),A=function(d){var u=e.onKeydown,c=e.checkable,T=e.selectable;switch(d.which){case Te.UP:{l(-1),d.preventDefault();break}case Te.DOWN:{l(1),d.preventDefault();break}}var P=b.value;if(P&&P.data){var D=P.data.isLeaf===!1||!!(P.data.children||[]).length,C=s.value;switch(d.which){case Te.LEFT:{D&&W.value.has(j.value)?Pe({},C):P.parent&&ke(P.parent.key),d.preventDefault();break}case Te.RIGHT:{D&&!W.value.has(j.value)?Pe({},C):P.children&&P.children.length&&ke(P.children[0].key),d.preventDefault();break}case Te.ENTER:case Te.SPACE:{c&&!C.disabled&&C.checkable!==!1&&!C.disableCheckbox?Ge({},C,!oe.value.has(j.value)):!c&&T&&!C.disabled&&C.selectable!==!1&&Re({},C);break}}}u&&u(d)};return g({onNodeExpand:Pe,scrollTo:se,onKeydown:A,selectedKeys:M(function(){return v.value}),checkedKeys:M(function(){return N.value}),halfCheckedKeys:M(function(){return p.value}),loadedKeys:M(function(){return y.value}),loadingKeys:M(function(){return S.value}),expandedKeys:M(function(){return m.value})}),va(function(){window.removeEventListener("dragend",Be),f.value=!0}),xa({expandedKeys:m,selectedKeys:v,loadedKeys:y,loadingKeys:S,checkedKeys:N,halfCheckedKeys:p,expandedKeysSet:W,selectedKeysSet:te,loadedKeysSet:ae,loadingKeysSet:re,checkedKeysSet:oe,halfCheckedKeysSet:ye,flattenNodes:z}),function(){var h,d=i.draggingNodeKey,u=i.dropLevelOffset,c=i.dropContainerKey,T=i.dropTargetKey,P=i.dropPosition,D=i.dragOverNodeKey,C=e.prefixCls,O=e.showLine,I=e.focusable,G=e.tabindex,V=G===void 0?0:G,Y=e.selectable,J=e.showIcon,X=e.icon,ce=X===void 0?t.icon:X,le=e.switcherIcon,U=e.draggable,ge=e.checkable,pe=e.checkStrictly,me=e.disabled,We=e.motion,on=e.loadData,Hn=e.filterTreeNode,Vn=e.height,Wn=e.itemHeight,Yn=e.virtual,Un=e.dropIndicatorRender,qn=e.onContextmenu,zn=e.onScroll,Xn=e.direction,Jn=a.class,Qn=a.style,Zn=Mn(B(B({},e),a),{aria:!0,data:!0}),Ye;return U&&(Ae(U)==="object"?Ye=U:typeof U=="function"?Ye={nodeDraggable:U}:Ye={}),_(ma,{value:{prefixCls:C,selectable:Y,showIcon:J,icon:ce,switcherIcon:le,draggable:Ye,draggingNodeKey:d,checkable:ge,customCheckable:t.checkable,checkStrictly:pe,disabled:me,keyEntities:x.value,dropLevelOffset:u,dropContainerKey:c,dropTargetKey:T,dropPosition:P,dragOverNodeKey:D,dragging:d!==null,indent:K.value,direction:Xn,dropIndicatorRender:Un,loadData:on,filterTreeNode:Hn,onNodeClick:Qe,onNodeDoubleClick:Ze,onNodeExpand:Pe,onNodeSelect:Re,onNodeCheck:Ge,onNodeLoad:$e,onNodeMouseEnter:en,onNodeMouseLeave:nn,onNodeContextMenu:an,onNodeDragStart:Ue,onNodeDragEnter:qe,onNodeDragOver:ze,onNodeDragLeave:Xe,onNodeDragEnd:Ie,onNodeDrop:Je,slots:t}},{default:function(){return[_("div",{role:"tree",class:Ce(C,Jn,(h={},q(h,"".concat(C,"-show-line"),O),q(h,"".concat(C,"-focused"),w.value),q(h,"".concat(C,"-active-focused"),j.value!==null),h))},[_(Ya,fe({ref:ne,prefixCls:C,style:Qn,disabled:me,selectable:Y,checkable:!!ge,motion:We,height:Vn,itemHeight:Wn,virtual:Yn,focusable:I,focused:w.value,tabindex:V,activeItem:b.value,onFocus:He,onBlur:tn,onKeydown:A,onActiveChange:ke,onListChangeStart:Ve,onListChangeEnd:rn,onContextmenu:qn,onScroll:zn},Zn),null)])]}})}}});function at(n,e,r,a){var t=a.isLeaf,g=a.expanded,f=a.loading,o=e;if(f)return _(sa,{class:"".concat(n,"-switcher-loading-icon")},null);var K;r&&Ae(r)==="object"&&(K=r.showLeafIcon);var v=null,N="".concat(n,"-switcher-icon");return t?(r&&(Ae(r)==="object"&&!K?v=_("span",{class:"".concat(n,"-switcher-leaf-line")},null):v=_(fa,{class:"".concat(n,"-switcher-line-icon")},null)),v):(v=_(ya,{class:N},null),r&&(v=g?_(ha,{class:"".concat(n,"-switcher-line-icon")},null):_(ga,{class:"".concat(n,"-switcher-line-icon")},null)),typeof e=="function"?o=e(B(B({},a),{defaultIcon:v,switcherCls:N})):pa(o)&&(o=ba(o,{class:N})),o||v)}export{nt as T,bn as V,un as a,xe as b,_a as c,Se as d,be as e,Aa as f,hn as g,mn as h,Bn as i,at as r,Da as t,Ga as u};
