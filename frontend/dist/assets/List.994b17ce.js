import{n as S,e as y,D as B,z as W,ah as He,y as Te,H as se,a as X,r as j,J as F,q as ue,a4 as ce,V as ve,Y as Re,c as N,Q as re,Z as Ee,C as ie,$ as Q,ag as we,R as xe,G as _e}from"./index.851d8163.js";import{R as Le}from"./index.e60ac993.js";import{w as O}from"./default.76e08716.js";import{s as C}from"./KeyCode.59783313.js";function ae(){var r=function e(t){e.current=t};return r}var q=function(e,t){var i=e.height,n=e.offset,s=e.prefixCls,a=e.onInnerResize,v=t.slots,u,d={},l={display:"flex",flexDirection:"column"};return n!==void 0&&(d={height:"".concat(i,"px"),position:"relative",overflow:"hidden"},l=S(S({},l),{transform:"translateY(".concat(n,"px)"),position:"absolute",left:0,right:0,top:0})),y("div",{style:d},[y(Le,{onResize:function(f){var g=f.offsetHeight;g&&a&&a()}},{default:function(){return[y("div",{style:l,class:B(W({},"".concat(s,"-holder-inner"),s))},[(u=v.default)===null||u===void 0?void 0:u.call(v)])]}})])};q.displayName="Filter";q.inheritAttrs=!1;q.props={prefixCls:String,height:Number,offset:Number,onInnerResize:Function};const Fe=q;var fe=function(e,t){var i=e.setRef,n=t.slots,s,a=He((s=n.default)===null||s===void 0?void 0:s.call(n));return a&&a.length?Te(a[0],{ref:i}):a};fe.props={setRef:{type:Function,default:function(){}}};const Ce=fe;var $e=20;function le(r){return"touches"in r?r.touches[0].pageY:r.pageY}const De=se({name:"ScrollBar",inheritAttrs:!1,props:{prefixCls:String,scrollTop:Number,scrollHeight:Number,height:Number,count:Number,onScroll:{type:Function},onStartMove:{type:Function},onStopMove:{type:Function}},setup:function(){return{moveRaf:null,scrollbarRef:ae(),thumbRef:ae(),visibleTimeout:null,state:X({dragging:!1,pageY:null,startTop:null,visible:!1})}},watch:{scrollTop:{handler:function(){this.delayHidden()},flush:"post"}},mounted:function(){var e,t;(e=this.scrollbarRef.current)===null||e===void 0||e.addEventListener("touchstart",this.onScrollbarTouchStart,C?{passive:!1}:!1),(t=this.thumbRef.current)===null||t===void 0||t.addEventListener("touchstart",this.onMouseDown,C?{passive:!1}:!1)},beforeUnmount:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)},methods:{delayHidden:function(){var e=this;clearTimeout(this.visibleTimeout),this.state.visible=!0,this.visibleTimeout=setTimeout(function(){e.state.visible=!1},2e3)},onScrollbarTouchStart:function(e){e.preventDefault()},onContainerMouseDown:function(e){e.stopPropagation(),e.preventDefault()},patchEvents:function(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),this.thumbRef.current.addEventListener("touchmove",this.onMouseMove,C?{passive:!1}:!1),this.thumbRef.current.addEventListener("touchend",this.onMouseUp)},removeEvents:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.scrollbarRef.current.removeEventListener("touchstart",this.onScrollbarTouchStart,C?{passive:!1}:!1),this.thumbRef.current.removeEventListener("touchstart",this.onMouseDown,C?{passive:!1}:!1),this.thumbRef.current.removeEventListener("touchmove",this.onMouseMove,C?{passive:!1}:!1),this.thumbRef.current.removeEventListener("touchend",this.onMouseUp),O.cancel(this.moveRaf)},onMouseDown:function(e){var t=this.$props.onStartMove;S(this.state,{dragging:!0,pageY:le(e),startTop:this.getTop()}),t(),this.patchEvents(),e.stopPropagation(),e.preventDefault()},onMouseMove:function(e){var t=this.state,i=t.dragging,n=t.pageY,s=t.startTop,a=this.$props.onScroll;if(O.cancel(this.moveRaf),i){var v=le(e)-n,u=s+v,d=this.getEnableScrollRange(),l=this.getEnableHeightRange(),h=l?u/l:0,f=Math.ceil(h*d);this.moveRaf=O(function(){a(f)})}},onMouseUp:function(){var e=this.$props.onStopMove;this.state.dragging=!1,e(),this.removeEvents()},getSpinHeight:function(){var e=this.$props,t=e.height,i=e.count,n=t/i*10;return n=Math.max(n,$e),n=Math.min(n,t/2),Math.floor(n)},getEnableScrollRange:function(){var e=this.$props,t=e.scrollHeight,i=e.height;return t-i||0},getEnableHeightRange:function(){var e=this.$props.height,t=this.getSpinHeight();return e-t||0},getTop:function(){var e=this.$props.scrollTop,t=this.getEnableScrollRange(),i=this.getEnableHeightRange();if(e===0||t===0)return 0;var n=e/t;return n*i},showScroll:function(){var e=this.$props,t=e.height,i=e.scrollHeight;return i>t}},render:function(){var e=this.state,t=e.dragging,i=e.visible,n=this.$props.prefixCls,s=this.getSpinHeight()+"px",a=this.getTop()+"px",v=this.showScroll(),u=v&&i;return y("div",{ref:this.scrollbarRef,class:B("".concat(n,"-scrollbar"),W({},"".concat(n,"-scrollbar-show"),v)),style:{width:"8px",top:0,bottom:0,right:0,position:"absolute",display:u?void 0:"none"},onMousedown:this.onContainerMouseDown,onMousemove:this.delayHidden},[y("div",{ref:this.thumbRef,class:B("".concat(n,"-scrollbar-thumb"),W({},"".concat(n,"-scrollbar-thumb-moving"),t)),style:{width:"100%",height:s,top:a,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:"99px",cursor:"pointer",userSelect:"none"},onMousedown:this.onMouseDown},null)])}});function Ie(r,e,t,i){var n=new Map,s=new Map,a=j(Symbol("update"));F(r,function(){a.value=Symbol("update")});var v=0;function u(){v+=1;var l=v;Promise.resolve().then(function(){l===v&&n.forEach(function(h,f){if(h&&h.offsetParent){var g=h.offsetHeight;s.get(f)!==g&&(a.value=Symbol("update"),s.set(f,h.offsetHeight))}})})}function d(l,h){var f=e(l),g=n.get(f);h?(n.set(f,h.$el||h),u()):n.delete(f),!g!=!h&&(h?t==null||t(l):i==null||i(l))}return[d,u,s,a]}function Ne(r,e,t,i,n,s,a,v){var u;return function(d){if(d==null){v();return}O.cancel(u);var l=e.value,h=i.itemHeight;if(typeof d=="number")a(d);else if(d&&ue(d)==="object"){var f,g=d.align;"index"in d?f=d.index:f=l.findIndex(function(M){return n(M)===d.key});var H=d.offset,p=H===void 0?0:H,P=function M(k,$){if(!(k<0||!r.value)){var w=r.value.clientHeight,U=!1,b=$;if(w){for(var T=$||g,x=0,_=0,R=0,D=Math.min(l.length,f),E=0;E<=D;E+=1){var A=n(l[E]);_=x;var V=t.get(A);R=_+(V===void 0?h:V),x=R,E===f&&V===void 0&&(U=!0)}var Y=r.value.scrollTop,L=null;switch(T){case"top":L=_-p;break;case"bottom":L=R-w+p;break;default:{var z=Y+w;_<Y?b="top":R>z&&(b="bottom")}}L!==null&&L!==Y&&a(L)}u=O(function(){U&&s(),M(k-1,b)})}};P(5)}}}var Oe=(typeof navigator>"u"?"undefined":ue(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const Pe=Oe,he=function(r,e){var t=!1,i=null;function n(){clearTimeout(i),t=!0,i=setTimeout(function(){t=!1},50)}return function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=s<0&&r.value||s>0&&e.value;return a&&v?(clearTimeout(i),t=!1):(!v||t)&&n(),!t&&v}};function ke(r,e,t,i){var n=0,s=null,a=null,v=!1,u=he(e,t);function d(h){if(!!r.value){O.cancel(s);var f=h.deltaY;n+=f,a=f,!u(f)&&(Pe||h.preventDefault(),s=O(function(){var g=v?10:1;i(n*g),n=0}))}}function l(h){!r.value||(v=h.detail===a)}return[d,l]}var Ue=14/15;function Ve(r,e,t){var i=!1,n=0,s=null,a=null,v=function(){s&&(s.removeEventListener("touchmove",u),s.removeEventListener("touchend",d))},u=function(g){if(i){var H=Math.ceil(g.touches[0].pageY),p=n-H;n=H,t(p)&&g.preventDefault(),clearInterval(a),a=setInterval(function(){p*=Ue,(!t(p,!0)||Math.abs(p)<=.1)&&clearInterval(a)},16)}},d=function(){i=!1,v()},l=function(g){v(),g.touches.length===1&&!i&&(i=!0,n=Math.ceil(g.touches[0].pageY),s=g.target,s.addEventListener("touchmove",u,{passive:!1}),s.addEventListener("touchend",d))},h=function(){};ce(function(){document.addEventListener("touchmove",h,{passive:!1}),F(r,function(f){e.value.removeEventListener("touchstart",l),v(),clearInterval(a),f&&e.value.addEventListener("touchstart",l,{passive:!1})},{immediate:!0})}),ve(function(){document.removeEventListener("touchmove",h)})}var Ye=globalThis&&globalThis.__rest||function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t},ze=[],Ke={overflowY:"auto",overflowAnchor:"none"};function je(r,e,t,i,n,s){var a=s.getKey;return r.slice(e,t+1).map(function(v,u){var d=e+u,l=n(v,d,{}),h=a(v);return y(Ce,{key:h,setRef:function(g){return i(v,g)}},{default:function(){return[l]}})})}var Ae=se({name:"List",inheritAttrs:!1,props:{prefixCls:String,data:Re.array,height:Number,itemHeight:Number,fullHeight:{type:Boolean,default:void 0},itemKey:{type:[String,Number,Function],required:!0},component:{type:[String,Object]},virtual:{type:Boolean,default:void 0},children:Function,onScroll:Function,onMousedown:Function,onMouseenter:Function,onVisibleChange:Function},setup:function(e,t){var i=t.expose,n=N(function(){var o=e.height,c=e.itemHeight,m=e.virtual;return!!(m!==!1&&o&&c)}),s=N(function(){var o=e.height,c=e.itemHeight,m=e.data;return n.value&&m&&c*m.length>o}),a=X({scrollTop:0,scrollMoving:!1}),v=N(function(){return e.data||ze}),u=re([]);F(v,function(){u.value=Ee(v.value).slice()},{immediate:!0});var d=re(function(o){});F(function(){return e.itemKey},function(o){typeof o=="function"?d.value=o:d.value=function(c){return c==null?void 0:c[o]}},{immediate:!0});var l=j(),h=j(),f=j(),g=function(c){return d.value(c)},H={getKey:g};function p(o){var c;typeof o=="function"?c=o(a.scrollTop):c=o;var m=_(c);l.value&&(l.value.scrollTop=m),a.scrollTop=m}var P=Ie(u,g,null,null),M=ie(P,4),k=M[0],$=M[1],w=M[2],U=M[3],b=X({scrollHeight:void 0,start:0,end:0,offset:void 0}),T=j(0);ce(function(){Q(function(){var o;T.value=((o=h.value)===null||o===void 0?void 0:o.offsetHeight)||0})}),we(function(){Q(function(){var o;T.value=((o=h.value)===null||o===void 0?void 0:o.offsetHeight)||0})}),F([n,u],function(){n.value||S(b,{scrollHeight:void 0,start:0,end:u.value.length-1,offset:void 0})},{immediate:!0}),F([n,u,T,s],function(){n.value&&!s.value&&S(b,{scrollHeight:T.value,start:0,end:u.value.length-1,offset:void 0})},{immediate:!0}),F([s,n,function(){return a.scrollTop},u,U,function(){return e.height},T],function(){if(!(!n.value||!s.value)){for(var o=0,c,m,I,G=u.value.length,pe=u.value,oe=a.scrollTop,me=e.itemHeight,be=e.height,Se=oe+be,K=0;K<G;K+=1){var Me=pe[K],ye=g(Me),Z=w.get(ye);Z===void 0&&(Z=me);var J=o+Z;c===void 0&&J>=oe&&(c=K,m=o),I===void 0&&J>Se&&(I=K),o=J}c===void 0&&(c=0,m=0),I===void 0&&(I=G-1),I=Math.min(I+1,G),S(b,{scrollHeight:o,start:c,end:I,offset:m})}},{immediate:!0});var x=N(function(){return b.scrollHeight-e.height});function _(o){var c=o;return Number.isNaN(x.value)||(c=Math.min(c,x.value)),c=Math.max(c,0),c}var R=N(function(){return a.scrollTop<=0}),D=N(function(){return a.scrollTop>=x.value}),E=he(R,D);function A(o){var c=o;p(c)}function V(o){var c,m=o.currentTarget.scrollTop;Math.abs(m-a.scrollTop)>=1&&p(m),(c=e.onScroll)===null||c===void 0||c.call(e,o)}var Y=ke(n,R,D,function(o){p(function(c){var m=c+o;return m})}),L=ie(Y,2),z=L[0],ee=L[1];Ve(n,l,function(o,c){return E(o,c)?!1:(z({preventDefault:function(){},deltaY:o}),!0)});function te(o){n.value&&o.preventDefault()}var ne=function(){l.value&&(l.value.removeEventListener("wheel",z,C?{passive:!1}:!1),l.value.removeEventListener("DOMMouseScroll",ee),l.value.removeEventListener("MozMousePixelScroll",te))};xe(function(){Q(function(){l.value&&(ne(),l.value.addEventListener("wheel",z,C?{passive:!1}:!1),l.value.addEventListener("DOMMouseScroll",ee),l.value.addEventListener("MozMousePixelScroll",te))})}),ve(function(){ne()});var de=Ne(l,u,w,e,g,$,p,function(){var o;(o=f.value)===null||o===void 0||o.delayHidden()});i({scrollTo:de});var ge=N(function(){var o=null;return e.height&&(o=S(W({},e.fullHeight?"height":"maxHeight",e.height+"px"),Ke),n.value&&(o.overflowY="hidden",a.scrollMoving&&(o.pointerEvents="none"))),o});return F([function(){return b.start},function(){return b.end},u],function(){if(e.onVisibleChange){var o=u.value.slice(b.start,b.end+1);e.onVisibleChange(o,u.value)}},{flush:"post"}),{state:a,mergedData:u,componentStyle:ge,onFallbackScroll:V,onScrollBar:A,componentRef:l,useVirtual:n,calRes:b,collectHeight:$,setInstance:k,sharedConfig:H,scrollBarRef:f,fillerInnerRef:h}},render:function(){var e=this,t=S(S({},this.$props),this.$attrs),i=t.prefixCls,n=i===void 0?"rc-virtual-list":i,s=t.height;t.itemHeight,t.fullHeight,t.data,t.itemKey,t.virtual;var a=t.component,v=a===void 0?"div":a;t.onScroll;var u=t.children,d=u===void 0?this.$slots.default:u,l=t.style,h=t.class,f=Ye(t,["prefixCls","height","itemHeight","fullHeight","data","itemKey","virtual","component","onScroll","children","style","class"]),g=B(n,h),H=this.state.scrollTop,p=this.calRes,P=p.scrollHeight,M=p.offset,k=p.start,$=p.end,w=this.componentStyle,U=this.onFallbackScroll,b=this.onScrollBar,T=this.useVirtual,x=this.collectHeight,_=this.sharedConfig,R=this.setInstance,D=this.mergedData;return y("div",_e({style:S(S({},l),{position:"relative"}),class:g},f),[y(v,{class:"".concat(n,"-holder"),style:w,ref:"componentRef",onScroll:U},{default:function(){return[y(Fe,{prefixCls:n,height:P,offset:M,onInnerResize:x,ref:"fillerInnerRef"},{default:function(){return je(D,k,$,R,d,_)}})]}}),T&&y(De,{ref:"scrollBarRef",prefixCls:n,scrollTop:H,height:s,scrollHeight:P,count:D.length,onScroll:b,onStartMove:function(){e.state.scrollMoving=!0},onStopMove:function(){e.state.scrollMoving=!1}},null)])}});const Ze=Ae;export{Ze as L,ae as c};
