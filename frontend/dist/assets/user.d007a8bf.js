import{_ as C,u as h,r as c,a as _,a4 as b,bJ as S,bK as U,o as w,b as M,aF as p,e as u,f as x,bL as z,bi as P}from"./index.851d8163.js";import{T as Q}from"./table.ac36eeac.js";import{c as T,U as D}from"./user-modal.d3e51f75.js";import R from"./user-search.27750fb0.js";import"./default.76e08716.js";import"./index.0af4fdf5.js";import"./KeyCode.59783313.js";import"./index.ef75ced5.js";import"./useState.ea7c1088.js";import"./useFlexGapSupport.66243b53.js";import"./index.e60ac993.js";import"./index.fa696f9c.js";import"./index.47c5c8b2.js";import"./index.8ab58dcd.js";import"./index.5fedb982.js";import"./index.647ff16d.js";import"./index.338b79aa.js";import"./List.994b17ce.js";import"./index.0c753e44.js";import"./index.6e8bd907.js";import"./index.4ab42408.js";import"./iconUtil.8455fcc7.js";import"./index.e69fb0f0.js";import"./conf.f5df1cf4.js";import"./index.1cfbeee5.js";import"./Password.063f365c.js";import"./role.88369262.js";import"./useModal.960570e2.js";import"./useSearch.7236db79.js";const B={class:"user"},F={__name:"user",setup(N){const m=h();m.$subscribe((e,t)=>{t.isPush&&(s(),t.isPush=!1)});const l=c(!1),n=c([]),r=c(),o=_({title:"",type:""}),a=_({current:1,pageSize:5,total:0,pageSizeOptions:["5","10","50"],showTotal:e=>`\u5171 ${e} \u6761\u6570\u636E`,onChange:(e,t)=>{a.current=e,a.pageSize=t,s()}});b(()=>{s()});const s=(e=null)=>{let t=a.current,d=a.pageSize;l.value?U({offset:t,limit:d,username:e==null?void 0:e.username,nickname:e==null?void 0:e.nickname}).then(i=>{n.value=i.data.items,a.total=i.data.total}):S({offset:t,limit:d}).then(i=>{n.value=i.data.items,a.total=i.data.total})},f=e=>{l.value=!0,s(e)},y=()=>{l.value=!1,m.isPush=!0},v=async e=>{const t=await z(e.id);P(t),s()},g=async()=>{o.title="\u65B0\u589E\u7528\u6237",o.type="create",r.value.showModal=!r.value.showModal},k=async e=>{o.title="\u7F16\u8F91\u7528\u6237",o.type="update",r.value.openModal(e)};return(e,t)=>(w(),M("div",B,[p(" \u67E5\u8BE2 "),u(R,{onQueryClick:f,onResetClick:y}),p(" \u5217\u8868\u6570\u636E "),u(Q,{columns:x(T),"data-source":n.value,pagination:a,"page-name":"user","list-title":"\u7528\u6237\u5217\u8868",onCreateClick:g,onUpdateClick:k,onDeleteClick:v},null,8,["columns","data-source","pagination"]),p(" \u65B0\u589E&\u7F16\u8F91 "),u(D,{ref_key:"modalRef",ref:r,"modal-title":o.title,"modal-type":o.type},null,8,["modal-title","modal-type"])]))}},me=C(F,[["__scopeId","data-v-c0af37fb"],["__file","D:/Code/fastapi_rbac/frontend/src/views/main/system/user/user.vue"]]);export{me as default};
