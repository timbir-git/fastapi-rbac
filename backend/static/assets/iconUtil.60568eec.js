import{O as z,P as Ne,E as Me,y as On,c as M,i as wn,e as _,x as U,X as De,Q as Jn,r as ie,m as B,a as Pn,a3 as Tn,ae as ea,D as fe,B as Ce,a5 as na,n as Ie,_ as Te,V as aa,A as Ae,bl as ta,H as Ee,Y as Ln,R as ra,a4 as oa,aP as la,ad as ia,F as da,a0 as ua,Z as on,an as ca,N as va,cL as sa,cM as fa,cN as ya,cO as ha,s as ga,v as pa}from"./index.ab0d47a4.js";import{w as In,p as Ka}from"./useFlexGapSupport.f5eec5c4.js";import{p as An,L as ba}from"./index.cef07818.js";import{K as Pe}from"./KeyCode.99f746d5.js";function Ke(n){var e=z();return Ne(function(){e.value=n()},{flush:"sync"}),e}var Mn=Symbol("TreeContextKey"),ka=Me({name:"TreeContext",props:{value:{type:Object}},setup:function(e,r){var a=r.slots;return On(Mn,M(function(){return e.value})),function(){var t;return(t=a.default)===null||t===void 0?void 0:t.call(a)}}}),sn=function(){return wn(Mn,M(function(){return{}}))},Fn=Symbol("KeysStateKey"),ma=function(e){On(Fn,e)},_n=function(){return wn(Fn,{expandedKeys:z([]),selectedKeys:z([]),loadedKeys:z([]),loadingKeys:z([]),checkedKeys:z([]),halfCheckedKeys:z([]),expandedKeysSet:M(function(){return new Set}),selectedKeysSet:M(function(){return new Set}),loadedKeysSet:M(function(){return new Set}),loadingKeysSet:M(function(){return new Set}),checkedKeysSet:M(function(){return new Set}),halfCheckedKeysSet:M(function(){return new Set}),flattenNodes:z([])})},xa=function(e){for(var r=e.prefixCls,a=e.level,t=e.isStart,g=e.isEnd,f="".concat(r,"-indent-unit"),l=[],p=0;p<a;p+=1){var v;l.push(_("span",{key:p,class:(v={},U(v,f,!0),U(v,"".concat(f,"-start"),t[p]),U(v,"".concat(f,"-end"),g[p]),v)},null))}return _("span",{"aria-hidden":"true",class:"".concat(r,"-indent")},[l])};const Ca=xa;var jn={eventKey:[String,Number],prefixCls:String,title:De.any,data:{type:Object,default:void 0},parent:{type:Object,default:void 0},isStart:{type:Array},isEnd:{type:Array},active:{type:Boolean,default:void 0},onMousemove:{type:Function},isLeaf:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},disableCheckbox:{type:Boolean,default:void 0},icon:De.any,switcherIcon:De.any,domRef:{type:Function}},Sa={prefixCls:{type:String},motion:{type:Object},focusable:{type:Boolean},activeItem:{type:Object},focused:{type:Boolean},tabindex:{type:Number},checkable:{type:Boolean},selectable:{type:Boolean},disabled:{type:Boolean},height:{type:Number},itemHeight:{type:Number},virtual:{type:Boolean},onScroll:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onActiveChange:{type:Function},onContextmenu:{type:Function},onListChangeStart:{type:Function},onListChangeEnd:{type:Function}},Na=function(){return{prefixCls:String,focusable:{type:Boolean,default:void 0},activeKey:[Number,String],tabindex:Number,children:De.any,treeData:{type:Array},fieldNames:{type:Object},showLine:{type:[Boolean,Object],default:void 0},showIcon:{type:Boolean,default:void 0},icon:De.any,selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},draggable:{type:[Function,Boolean]},defaultExpandParent:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:[Object,Array]},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},allowDrop:{type:Function},dropIndicatorRender:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onKeydown:{type:Function},onContextmenu:{type:Function},onClick:{type:Function},onDblclick:{type:Function},onScroll:{type:Function},onExpand:{type:Function},onCheck:{type:Function},onSelect:{type:Function},onLoad:{type:Function},loadData:{type:Function},loadedKeys:{type:Array},onMouseenter:{type:Function},onMouseleave:{type:Function},onRightClick:{type:Function},onDragstart:{type:Function},onDragenter:{type:Function},onDragover:{type:Function},onDragleave:{type:Function},onDragend:{type:Function},onDrop:{type:Function},onActiveChange:{type:Function},filterTreeNode:{type:Function},motion:De.any,switcherIcon:De.any,height:Number,itemHeight:Number,virtual:{type:Boolean,default:void 0},direction:{type:String}}},Da=globalThis&&globalThis.__rest||function(n,e){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(n);t<a.length;t++)e.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(n,a[t])&&(r[a[t]]=n[a[t]]);return r},hn="open",gn="close",Ea="---";const pn=Me({name:"TreeNode",inheritAttrs:!1,props:jn,isTreeNode:1,slots:["title","icon","switcherIcon"],setup:function(e,r){var a=r.attrs,t=r.slots,g=r.expose;Jn(!("slots"in e.data),"treeData slots is deprecated, please use ".concat(Object.keys(e.data.slots||{}).map(function(K){return"`v-slot:"+K+"` "}),"instead"));var f=ie(!1),l=sn(),p=_n(),v=p.expandedKeysSet,N=p.selectedKeysSet,b=p.loadedKeysSet,y=p.loadingKeysSet,S=p.checkedKeysSet,m=p.halfCheckedKeysSet,E=l.value,i=E.dragOverNodeKey,k=E.dropPosition,x=E.keyEntities,w=M(function(){return un(e.eventKey,{expandedKeysSet:v.value,selectedKeysSet:N.value,loadedKeysSet:b.value,loadingKeysSet:y.value,checkedKeysSet:S.value,halfCheckedKeysSet:m.value,dragOverNodeKey:i,dropPosition:k,keyEntities:x})}),j=Ke(function(){return w.value.expanded}),F=Ke(function(){return w.value.selected}),$=Ke(function(){return w.value.checked}),ne=Ke(function(){return w.value.loaded}),R=Ke(function(){return w.value.loading}),L=Ke(function(){return w.value.halfChecked}),Q=Ke(function(){return w.value.dragOver}),de=Ke(function(){return w.value.dragOverGapTop}),W=Ke(function(){return w.value.dragOverGapBottom}),te=Ke(function(){return w.value.pos}),ae=ie(),re=M(function(){var K=e.eventKey,o=l.value.keyEntities,s=o[K]||{},I=s.children;return!!(I||[]).length}),oe=M(function(){var K=e.isLeaf,o=l.value.loadData,s=re.value;return K===!1?!1:K||!o&&!s||o&&ne.value&&!s}),ye=M(function(){return oe.value?null:j.value?hn:gn}),H=M(function(){var K=e.disabled,o=l.value.disabled;return!!(o||K)}),q=M(function(){var K=e.checkable,o=l.value.checkable;return!o||K===!1?!1:o}),ue=M(function(){var K=e.selectable,o=l.value.selectable;return typeof K=="boolean"?K:o}),he=M(function(){var K=e.data,o=e.active,s=e.checkable,I=e.disableCheckbox,h=e.disabled,d=e.selectable;return B(B({active:o,checkable:s,disableCheckbox:I,disabled:h,selectable:d},K),{dataRef:K,data:K,isLeaf:oe.value,checked:$.value,expanded:j.value,loading:R.value,selected:F.value,halfChecked:L.value})}),ve=na(),Z=M(function(){var K=e.eventKey,o=l.value.keyEntities,s=o[K]||{},I=s.parent;return B(B({},cn(B({},e,w.value))),{parent:I})}),se=Pn({eventData:Z,eventKey:M(function(){return e.eventKey}),selectHandle:ae,pos:te,key:ve.vnode.key});g(se);var be=function(o){var s=l.value.onNodeDoubleClick;s(o,Z.value)},_e=function(o){if(!H.value){var s=l.value.onNodeSelect;o.preventDefault(),s(o,Z.value)}},Le=function(o){if(!H.value){var s=e.disableCheckbox,I=l.value.onNodeCheck;if(!(!q.value||s)){o.preventDefault();var h=!$.value;I(o,Z.value,h)}}},je=function(o){var s=l.value.onNodeClick;s(o,Z.value),ue.value?_e(o):Le(o)},Ye=function(o){var s=l.value.onNodeMouseEnter;s(o,Z.value)},Ue=function(o){var s=l.value.onNodeMouseLeave;s(o,Z.value)},Xe=function(o){var s=l.value.onNodeContextMenu;s(o,Z.value)},qe=function(o){var s=l.value.onNodeDragStart;o.stopPropagation(),f.value=!0,s(o,se);try{o.dataTransfer.setData("text/plain","")}catch{}},ze=function(o){var s=l.value.onNodeDragEnter;o.preventDefault(),o.stopPropagation(),s(o,se)},Qe=function(o){var s=l.value.onNodeDragOver;o.preventDefault(),o.stopPropagation(),s(o,se)},Ze=function(o){var s=l.value.onNodeDragLeave;o.stopPropagation(),s(o,se)},Be=function(o){var s=l.value.onNodeDragEnd;o.stopPropagation(),f.value=!1,s(o,se)},Re=function(o){var s=l.value.onNodeDrop;o.preventDefault(),o.stopPropagation(),f.value=!1,s(o,se)},Ge=function(o){var s=l.value.onNodeExpand;R.value||s(o,Z.value)},Je=function(){var o=e.data,s=l.value.draggable;return!!(s&&(!s.nodeDraggable||s.nodeDraggable(o)))},en=function(){var o=l.value,s=o.draggable,I=o.prefixCls;return s!=null&&s.icon?_("span",{class:"".concat(I,"-draggable-icon")},[s.icon]):null},nn=function(){var o,s,I,h=e.switcherIcon,d=h===void 0?t.switcherIcon||((o=l.value.slots)===null||o===void 0?void 0:o[(I=(s=e.data)===null||s===void 0?void 0:s.slots)===null||I===void 0?void 0:I.switcherIcon]):h,u=l.value.switcherIcon,c=d||u;return typeof c=="function"?c(he.value):c},$e=function(){var o=l.value,s=o.loadData,I=o.onNodeLoad;R.value||s&&j.value&&!oe.value&&!re.value&&!ne.value&&I(Z.value)};Tn(function(){$e()}),ea(function(){$e()});var an=function(){var o=l.value.prefixCls,s=nn();if(oe.value)return s!==!1?_("span",{class:Ce("".concat(o,"-switcher"),"".concat(o,"-switcher-noop"))},[s]):null;var I=Ce("".concat(o,"-switcher"),"".concat(o,"-switcher_").concat(j.value?hn:gn));return s!==!1?_("span",{onClick:Ge,class:I},[s]):null},we=function(){var o,s,I=e.disableCheckbox,h=l.value.prefixCls,d=H.value,u=q.value;return u?_("span",{class:Ce("".concat(h,"-checkbox"),$.value&&"".concat(h,"-checkbox-checked"),!$.value&&L.value&&"".concat(h,"-checkbox-indeterminate"),(d||I)&&"".concat(h,"-checkbox-disabled")),onClick:Le},[(s=(o=l.value).customCheckable)===null||s===void 0?void 0:s.call(o)]):null},He=function(){var o=l.value.prefixCls;return _("span",{class:Ce("".concat(o,"-iconEle"),"".concat(o,"-icon__").concat(ye.value||"docu"),R.value&&"".concat(o,"-icon_loading"))},null)},tn=function(){var o=e.disabled,s=e.eventKey,I=l.value,h=I.draggable,d=I.dropLevelOffset,u=I.dropPosition,c=I.prefixCls,T=I.indent,P=I.dropIndicatorRender,D=I.dragOverNodeKey,C=I.direction,O=h!==!1,A=!o&&O&&D===s;return A?P({dropPosition:u,dropLevelOffset:d,indent:T,prefixCls:c,direction:C}):null},ke=function(){var o,s,I,h,d,u,c=e.icon,T=c===void 0?t.icon:c,P=e.data,D=t.title||((o=l.value.slots)===null||o===void 0?void 0:o[(I=(s=e.data)===null||s===void 0?void 0:s.slots)===null||I===void 0?void 0:I.title])||((h=l.value.slots)===null||h===void 0?void 0:h.title)||e.title,C=l.value,O=C.prefixCls,A=C.showIcon,G=C.icon,V=C.loadData,X=H.value,J="".concat(O,"-node-content-wrapper"),ee;if(A){var ce=T||((d=l.value.slots)===null||d===void 0?void 0:d[(u=P==null?void 0:P.slots)===null||u===void 0?void 0:u.icon])||G;ee=ce?_("span",{class:Ce("".concat(O,"-iconEle"),"".concat(O,"-icon__customize"))},[typeof ce=="function"?ce(he.value):ce]):He()}else V&&R.value&&(ee=He());var le;typeof D=="function"?le=D(he.value):le=D,le=le===void 0?Ea:le;var Y=_("span",{class:"".concat(O,"-title")},[le]);return _("span",{ref:ae,title:typeof D=="string"?D:"",class:Ce("".concat(J),"".concat(J,"-").concat(ye.value||"normal"),!X&&(F.value||f.value)&&"".concat(O,"-node-selected")),onMouseenter:Ye,onMouseleave:Ue,onContextmenu:Xe,onClick:je,onDblclick:be},[ee,Y,tn()])};return function(){var K,o=B(B({},e),a),s=o.eventKey,I=o.isLeaf,h=o.isStart,d=o.isEnd,u=o.domRef,c=o.active;o.data;var T=o.onMousemove,P=o.selectable,D=Da(o,["eventKey","isLeaf","isStart","isEnd","domRef","active","data","onMousemove","selectable"]),C=l.value,O=C.prefixCls,A=C.filterTreeNode,G=C.keyEntities,V=C.dropContainerKey,X=C.dropTargetKey,J=C.draggingNodeKey,ee=H.value,ce=An(D,{aria:!0,data:!0}),le=G[s]||{},Y=le.level,ge=d[d.length-1],pe=Je(),me=!ee&&pe,Ve=J===s,rn=P!==void 0?{"aria-selected":!!P}:void 0;return _("div",fe(fe({ref:u,class:Ce(a.class,"".concat(O,"-treenode"),(K={},U(K,"".concat(O,"-treenode-disabled"),ee),U(K,"".concat(O,"-treenode-switcher-").concat(j.value?"open":"close"),!I),U(K,"".concat(O,"-treenode-checkbox-checked"),$.value),U(K,"".concat(O,"-treenode-checkbox-indeterminate"),L.value),U(K,"".concat(O,"-treenode-selected"),F.value),U(K,"".concat(O,"-treenode-loading"),R.value),U(K,"".concat(O,"-treenode-active"),c),U(K,"".concat(O,"-treenode-leaf-last"),ge),U(K,"".concat(O,"-treenode-draggable"),me),U(K,"dragging",Ve),U(K,"drop-target",X===s),U(K,"drop-container",V===s),U(K,"drag-over",!ee&&Q.value),U(K,"drag-over-gap-top",!ee&&de.value),U(K,"drag-over-gap-bottom",!ee&&W.value),U(K,"filter-node",A&&A(Z.value)),K)),style:a.style,draggable:me,"aria-grabbed":Ve,onDragstart:me?qe:void 0,onDragenter:pe?ze:void 0,onDragover:pe?Qe:void 0,onDragleave:pe?Ze:void 0,onDrop:pe?Re:void 0,onDragend:pe?Be:void 0,onMousemove:T},rn),ce),[_(Ca,{prefixCls:O,level:Y,isStart:h,isEnd:d},null),en(),an(),we(),ke()])}}});globalThis&&globalThis.__rest;function xe(n,e){if(!n)return[];var r=n.slice(),a=r.indexOf(e);return a>=0&&r.splice(a,1),r}function Se(n,e){var r=(n||[]).slice();return r.indexOf(e)===-1&&r.push(e),r}function fn(n){return n.split("-")}function Bn(n,e){return"".concat(n,"-").concat(e)}function Oa(n){return n&&n.type&&n.type.isTreeNode}function wa(n,e){var r=[],a=e[n];function t(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];g.forEach(function(f){var l=f.key,p=f.children;r.push(l),t(p)})}return t(a.children),r}function Pa(n){if(n.parent){var e=fn(n.pos);return Number(e[e.length-1])===n.parent.children.length-1}return!1}function Ta(n){var e=fn(n.pos);return Number(e[e.length-1])===0}function Kn(n,e,r,a,t,g,f,l,p,v){var N,b=n.clientX,y=n.clientY,S=n.target.getBoundingClientRect(),m=S.top,E=S.height,i=(v==="rtl"?-1:1)*(((t==null?void 0:t.x)||0)-b),k=(i-12)/a,x=l[r.eventKey];if(y<m+E/2){var w=f.findIndex(function(re){return re.key===x.key}),j=w<=0?0:w-1,F=f[j].key;x=l[F]}var $=x.key,ne=x,R=x.key,L=0,Q=0;if(!p.has($))for(var de=0;de<k&&Pa(x);de+=1)x=x.parent,Q+=1;var W=e.eventData,te=x.node,ae=!0;return Ta(x)&&x.level===0&&y<m+E/2&&g({dragNode:W,dropNode:te,dropPosition:-1})&&x.key===r.eventKey?L=-1:(ne.children||[]).length&&p.has(R)?g({dragNode:W,dropNode:te,dropPosition:0})?L=0:ae=!1:Q===0?k>-1.5?g({dragNode:W,dropNode:te,dropPosition:1})?L=1:ae=!1:g({dragNode:W,dropNode:te,dropPosition:0})?L=0:g({dragNode:W,dropNode:te,dropPosition:1})?L=1:ae=!1:g({dragNode:W,dropNode:te,dropPosition:1})?L=1:ae=!1,{dropPosition:L,dropLevelOffset:Q,dropTargetKey:x.key,dropTargetPos:x.pos,dragOverNodeKey:R,dropContainerKey:L===0?null:((N=x.parent)===null||N===void 0?void 0:N.key)||null,dropAllowed:ae}}function bn(n,e){if(!!n){var r=e.multiple;return r?n.slice():n.length?[n[0]]:n}}function ln(n){if(!n)return null;var e;if(Array.isArray(n))e={checkedKeys:n,halfCheckedKeys:void 0};else if(Ie(n)==="object")e={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return null;return e}function kn(n,e){var r=new Set;function a(t){if(!r.has(t)){var g=e[t];if(!!g){r.add(t);var f=g.parent,l=g.node;l.disabled||f&&a(f.key)}}}return(n||[]).forEach(function(t){a(t)}),Te(r)}var La=globalThis&&globalThis.__rest||function(n,e){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(n);t<a.length;t++)e.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(n,a[t])&&(r[a[t]]=n[a[t]]);return r};function Fe(n,e){return n!=null?n:e}function yn(n){var e=n||{},r=e.title,a=e._title,t=e.key,g=e.children,f=r||"title";return{title:f,_title:a||[f],key:t||"key",children:g||"children"}}function Ia(n){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=aa(r);return a.map(function(t){var g,f,l,p;if(!Oa(t))return null;for(var v=t.children||{},N=t.key,b={},y=0,S=Object.entries(t.props);y<S.length;y++){var m=Ae(S[y],2),E=m[0],i=m[1];b[ta(E)]=i}var k=b.isLeaf,x=b.checkable,w=b.selectable,j=b.disabled,F=b.disableCheckbox,$={isLeaf:k||k===""||void 0,checkable:x||x===""||void 0,selectable:w||w===""||void 0,disabled:j||j===""||void 0,disableCheckbox:F||F===""||void 0},ne=B(B({},b),$),R=b.title,L=R===void 0?(g=v.title)===null||g===void 0?void 0:g.call(v,ne):R,Q=b.icon,de=Q===void 0?(f=v.icon)===null||f===void 0?void 0:f.call(v,ne):Q,W=b.switcherIcon,te=W===void 0?(l=v.switcherIcon)===null||l===void 0?void 0:l.call(v,ne):W,ae=La(b,["title","icon","switcherIcon"]),re=(p=v.default)===null||p===void 0?void 0:p.call(v),oe=B(B(B({},ae),{title:L,icon:de,switcherIcon:te,key:N,isLeaf:k}),$),ye=e(re);return ye.length&&(oe.children=ye),oe})}return e(n)}function Aa(n,e,r){var a=yn(r),t=a._title,g=a.key,f=a.children,l=new Set(e===!0?[]:e),p=[];function v(N){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return N.map(function(y,S){for(var m=Bn(b?b.pos:"0",S),E=Fe(y[g],m),i,k=0;k<t.length;k+=1){var x=t[k];if(y[x]!==void 0){i=y[x];break}}var w=B(B({},In(y,[].concat(Te(t),[g,f]))),{title:i,key:E,parent:b,pos:m,children:null,data:y,isStart:[].concat(Te(b?b.isStart:[]),[S===0]),isEnd:[].concat(Te(b?b.isEnd:[]),[S===N.length-1])});return p.push(w),e===!0||l.has(E)?w.children=v(y[f]||[],w):w.children=[],w})}return v(n),p}function Ma(n,e,r){var a={};Ie(r)==="object"?a=r:a={externalGetKey:r},a=a||{};var t=a,g=t.childrenPropName,f=t.externalGetKey,l=t.fieldNames,p=yn(l),v=p.key,N=p.children,b=g||N,y;f?typeof f=="string"?y=function(E){return E[f]}:typeof f=="function"&&(y=function(E){return f(E)}):y=function(E,i){return Fe(E[v],i)};function S(m,E,i,k){var x=m?m[b]:n,w=m?Bn(i.pos,E):"0",j=m?[].concat(Te(k),[m]):[];if(m){var F=y(m,w),$={node:m,index:E,pos:w,key:F,parentPos:i.node?i.pos:null,level:i.level+1,nodes:j};e($)}x&&x.forEach(function(ne,R){S(ne,R,{node:m,pos:w,level:i?i.level+1:-1},j)})}S(null)}function Fa(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.initWrapper,a=e.processEntity,t=e.onProcessFinished,g=e.externalGetKey,f=e.childrenPropName,l=e.fieldNames,p=arguments.length>2?arguments[2]:void 0,v=g||p,N={},b={},y={posEntities:N,keyEntities:b};return r&&(y=r(y)||y),Ma(n,function(S){var m=S.node,E=S.index,i=S.pos,k=S.key,x=S.parentPos,w=S.level,j=S.nodes,F={node:m,nodes:j,index:E,key:k,pos:i,level:w},$=Fe(k,i);N[i]=F,b[$]=F,F.parent=N[x],F.parent&&(F.parent.children=F.parent.children||[],F.parent.children.push(F)),a&&a(F,y)},{externalGetKey:v,childrenPropName:f,fieldNames:l}),t&&t(y),y}function un(n,e){var r=e.expandedKeysSet,a=e.selectedKeysSet,t=e.loadedKeysSet,g=e.loadingKeysSet,f=e.checkedKeysSet,l=e.halfCheckedKeysSet,p=e.dragOverNodeKey,v=e.dropPosition,N=e.keyEntities,b=N[n],y={eventKey:n,expanded:r.has(n),selected:a.has(n),loaded:t.has(n),loading:g.has(n),checked:f.has(n),halfChecked:l.has(n),pos:String(b?b.pos:""),parent:b.parent,dragOver:p===n&&v===0,dragOverGapTop:p===n&&v===-1,dragOverGapBottom:p===n&&v===1};return y}function cn(n){var e=n.data,r=n.expanded,a=n.selected,t=n.checked,g=n.loaded,f=n.loading,l=n.halfChecked,p=n.dragOver,v=n.dragOverGapTop,N=n.dragOverGapBottom,b=n.pos,y=n.active,S=n.eventKey,m=B(B({dataRef:e},e),{expanded:r,selected:a,checked:t,loaded:g,loading:f,halfChecked:l,dragOver:p,dragOverGapTop:v,dragOverGapBottom:N,pos:b,active:y,eventKey:S,key:S});return"props"in m||Object.defineProperty(m,"props",{get:function(){return n}}),m}function Rn(n,e){var r=new Set;return n.forEach(function(a){e.has(a)||r.add(a)}),r}function _a(n){var e=n||{},r=e.disabled,a=e.disableCheckbox,t=e.checkable;return!!(r||a)||t===!1}function ja(n,e,r,a){for(var t=new Set(n),g=new Set,f=0;f<=r;f+=1){var l=e.get(f)||new Set;l.forEach(function(b){var y=b.key,S=b.node,m=b.children,E=m===void 0?[]:m;t.has(y)&&!a(S)&&E.filter(function(i){return!a(i.node)}).forEach(function(i){t.add(i.key)})})}for(var p=new Set,v=r;v>=0;v-=1){var N=e.get(v)||new Set;N.forEach(function(b){var y=b.parent,S=b.node;if(!(a(S)||!b.parent||p.has(b.parent.key))){if(a(b.parent.node)){p.add(y.key);return}var m=!0,E=!1;(y.children||[]).filter(function(i){return!a(i.node)}).forEach(function(i){var k=i.key,x=t.has(k);m&&!x&&(m=!1),!E&&(x||g.has(k))&&(E=!0)}),m&&t.add(y.key),E&&g.add(y.key),p.add(y.key)}})}return{checkedKeys:Array.from(t),halfCheckedKeys:Array.from(Rn(g,t))}}function Ba(n,e,r,a,t){for(var g=new Set(n),f=new Set(e),l=0;l<=a;l+=1){var p=r.get(l)||new Set;p.forEach(function(y){var S=y.key,m=y.node,E=y.children,i=E===void 0?[]:E;!g.has(S)&&!f.has(S)&&!t(m)&&i.filter(function(k){return!t(k.node)}).forEach(function(k){g.delete(k.key)})})}f=new Set;for(var v=new Set,N=a;N>=0;N-=1){var b=r.get(N)||new Set;b.forEach(function(y){var S=y.parent,m=y.node;if(!(t(m)||!y.parent||v.has(y.parent.key))){if(t(y.parent.node)){v.add(S.key);return}var E=!0,i=!1;(S.children||[]).filter(function(k){return!t(k.node)}).forEach(function(k){var x=k.key,w=g.has(x);E&&!w&&(E=!1),!i&&(w||f.has(x))&&(i=!0)}),E||g.delete(S.key),i&&f.add(S.key),v.add(S.key)}})}return{checkedKeys:Array.from(g),halfCheckedKeys:Array.from(Rn(f,g))}}function dn(n,e,r,a,t,g){var f;g?f=g:f=_a;var l=new Set(n.filter(function(v){var N=!!r[v];return N})),p;return e===!0?p=ja(l,t,a,f):p=Ba(l,e.halfCheckedKeys,t,a,f),p}function Ra(n){var e=ie(0),r=z();return Ne(function(){var a=new Map,t=0,g=n.value||{};for(var f in g)if(Object.prototype.hasOwnProperty.call(g,f)){var l=g[f],p=l.level,v=a.get(p);v||(v=new Set,a.set(p,v)),v.add(l),t=Math.max(t,p)}e.value=t,r.value=a}),{maxLevel:e,levelEntities:r}}var mn=globalThis&&globalThis.__rest||function(n,e){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(n);t<a.length;t++)e.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(n,a[t])&&(r[a[t]]=n[a[t]]);return r};const Ga=Me({name:"MotionTreeNode",inheritAttrs:!1,props:B(B({},jn),{active:Boolean,motion:Object,motionNodes:{type:Array},onMotionStart:Function,onMotionEnd:Function,motionType:String}),slots:["title","icon","switcherIcon","checkable"],setup:function(e,r){var a=r.attrs,t=r.slots,g=ie(!0),f=sn(),l=ie(!1),p=M(function(){return e.motion?e.motion:Ka()}),v=function(b,y){var S,m,E,i;y==="appear"?(m=(S=p.value)===null||S===void 0?void 0:S.onAfterEnter)===null||m===void 0||m.call(S,b):y==="leave"&&((i=(E=p.value)===null||E===void 0?void 0:E.onAfterLeave)===null||i===void 0||i.call(E,b)),l.value||e.onMotionEnd(),l.value=!0};return Ee(function(){return e.motionNodes},function(){e.motionNodes&&e.motionType==="hide"&&g.value&&Ln(function(){g.value=!1})},{immediate:!0,flush:"post"}),Tn(function(){e.motionNodes&&e.onMotionStart()}),ra(function(){e.motionNodes&&v()}),function(){e.motion;var N=e.motionNodes,b=e.motionType,y=e.active,S=e.eventKey,m=mn(e,["motion","motionNodes","motionType","active","eventKey"]);return N?_(ia,fe(fe({},p.value),{},{appear:b==="show",onAfterAppear:function(i){return v(i,"appear")},onAfterLeave:function(i){return v(i,"leave")}}),{default:function(){return[oa(_("div",{class:"".concat(f.value.prefixCls,"-treenode-motion")},[N.map(function(i){var k=mn(i.data,[]),x=i.title,w=i.key,j=i.isStart,F=i.isEnd;return delete k.children,_(pn,fe(fe({},k),{},{title:x,active:y,data:i.data,key:w,eventKey:w,isStart:j,isEnd:F}),t)})]),[[la,g.value]])]}}):_(pn,fe(fe({domRef:ie,class:a.class,style:a.style},m),{},{active:y,eventKey:S}),t)}}});function $a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n.length,a=e.length;if(Math.abs(r-a)!==1)return{add:!1,key:null};function t(g,f){var l=new Map;g.forEach(function(v){l.set(v,!0)});var p=f.filter(function(v){return!l.has(v)});return p.length===1?p[0]:null}return r<a?{add:!0,key:t(n,e)}:{add:!1,key:t(e,n)}}function xn(n,e,r){var a=n.findIndex(function(l){return l.key===r}),t=n[a+1],g=e.findIndex(function(l){return l.key===r});if(t){var f=e.findIndex(function(l){return l.key===t.key});return e.slice(g+1,f)}return e.slice(g+1)}var Cn=globalThis&&globalThis.__rest||function(n,e){var r={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(n);t<a.length;t++)e.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(n,a[t])&&(r[a[t]]=n[a[t]]);return r},Sn={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Ha=function(){},Oe="RC_TREE_MOTION_".concat(Math.random()),vn={key:Oe},Gn={key:Oe,level:0,index:0,pos:"0",node:vn,nodes:[vn]},Nn={parent:null,children:[],pos:Gn.pos,data:vn,title:null,key:Oe,isStart:[],isEnd:[]};function Dn(n,e,r,a){return e===!1||!r?n:n.slice(0,Math.ceil(r/a)+1)}function En(n){var e=n.key,r=n.pos;return Fe(e,r)}function Va(n){for(var e=String(n.key),r=n;r.parent;)r=r.parent,e="".concat(r.key," > ").concat(e);return e}const Wa=Me({name:"NodeList",inheritAttrs:!1,props:Sa,setup:function(e,r){var a=r.expose,t=r.attrs,g=ie(),f=ie(),l=_n(),p=l.expandedKeys,v=l.flattenNodes;a({scrollTo:function(x){g.value.scrollTo(x)},getIndentWidth:function(){return f.value.offsetWidth}});var N=z(v.value),b=z([]),y=ie(null);function S(){N.value=v.value,b.value=[],y.value=null,e.onListChangeEnd()}var m=sn();Ee([function(){return p.value.slice()},v],function(k,x){var w=Ae(k,2),j=w[0],F=w[1],$=Ae(x,2),ne=$[0],R=$[1],L=$a(ne,j);if(L.key!==null){var Q=e.virtual,de=e.height,W=e.itemHeight;if(L.add){var te=R.findIndex(function(q){var ue=q.key;return ue===L.key}),ae=Dn(xn(R,F,L.key),Q,de,W),re=R.slice();re.splice(te+1,0,Nn),N.value=re,b.value=ae,y.value="show"}else{var oe=F.findIndex(function(q){var ue=q.key;return ue===L.key}),ye=Dn(xn(F,R,L.key),Q,de,W),H=F.slice();H.splice(oe+1,0,Nn),N.value=H,b.value=ye,y.value="hide"}}else R!==F&&(N.value=F)}),Ee(function(){return m.value.dragging},function(k){k||S()});var E=M(function(){return e.motion===void 0?N.value:v.value}),i=function(){e.onActiveChange(null)};return function(){var k=B(B({},e),t),x=k.prefixCls;k.selectable,k.checkable;var w=k.disabled,j=k.motion,F=k.height,$=k.itemHeight,ne=k.virtual,R=k.focusable,L=k.activeItem,Q=k.focused,de=k.tabindex,W=k.onKeydown,te=k.onFocus,ae=k.onBlur,re=k.onListChangeStart;k.onListChangeEnd;var oe=Cn(k,["prefixCls","selectable","checkable","disabled","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabindex","onKeydown","onFocus","onBlur","onListChangeStart","onListChangeEnd"]);return _(da,null,[Q&&L&&_("span",{style:Sn,"aria-live":"assertive"},[Va(L)]),_("div",null,[_("input",{style:Sn,disabled:R===!1||w,tabindex:R!==!1?de:null,onKeydown:W,onFocus:te,onBlur:ae,value:"",onChange:Ha,"aria-label":"for screen reader"},null)]),_("div",{class:"".concat(x,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},[_("div",{class:"".concat(x,"-indent")},[_("div",{ref:f,class:"".concat(x,"-indent-unit")},null)])]),_(ba,fe(fe({},In(oe,["onActiveChange"])),{},{data:E.value,itemKey:En,height:F,fullHeight:!1,virtual:ne,itemHeight:$,prefixCls:"".concat(x,"-list"),ref:g,onVisibleChange:function(H,q){var ue=new Set(H),he=q.filter(function(ve){return!ue.has(ve)});he.some(function(ve){return En(ve)===Oe})&&S()}}),{default:function(H){var q=H.pos,ue=Cn(H.data,[]),he=H.title,ve=H.key,Z=H.isStart,se=H.isEnd,be=Fe(ve,q);return delete ue.key,delete ue.children,_(Ga,fe(fe({},ue),{},{eventKey:be,title:he,active:!!L&&ve===L.key,data:H.data,isStart:Z,isEnd:se,motion:j,motionNodes:ve===Oe?b.value:null,motionType:y.value,onMotionStart:re,onMotionEnd:S,onMousemove:i}),null)}})])}}});function Ya(n){var e=n.dropPosition,r=n.dropLevelOffset,a=n.indent,t={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:"".concat(2,"px")};switch(e){case-1:t.top=0,t.left="".concat(-r*a,"px");break;case 1:t.bottom=0,t.left="".concat(-r*a,"px");break;case 0:t.bottom=0,t.left="".concat(a);break}return _("div",{style:t},null)}var Ua=10;const Ja=Me({name:"Tree",inheritAttrs:!1,slots:["checkable","title","icon","titleRender"],props:ua(Na(),{prefixCls:"vc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Ya,allowDrop:function(){return!0}}),setup:function(e,r){var a=r.attrs,t=r.slots,g=r.expose,f=ie(!1),l={},p=ie(),v=z([]),N=z([]),b=z([]),y=z([]),S=z([]),m=z([]),E={},i=Pn({draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null}),k=z([]);Ee([function(){return e.treeData},function(){return e.children}],function(){k.value=e.treeData!==void 0?on(e.treeData).slice():Ia(on(e.children))},{immediate:!0,deep:!0});var x=z({}),w=ie(!1),j=ie(null),F=ie(!1),$=M(function(){return yn(e.fieldNames)}),ne=ie(),R=null,L=null,Q=null,de=M(function(){return{expandedKeysSet:W.value,selectedKeysSet:te.value,loadedKeysSet:ae.value,loadingKeysSet:re.value,checkedKeysSet:oe.value,halfCheckedKeysSet:ye.value,dragOverNodeKey:i.dragOverNodeKey,dropPosition:i.dropPosition,keyEntities:x.value}}),W=M(function(){return new Set(m.value)}),te=M(function(){return new Set(v.value)}),ae=M(function(){return new Set(y.value)}),re=M(function(){return new Set(S.value)}),oe=M(function(){return new Set(N.value)}),ye=M(function(){return new Set(b.value)});Ne(function(){if(k.value){var h=Fa(k.value,{fieldNames:$.value});x.value=B(U({},Oe,Gn),h.keyEntities)}});var H=!1;Ee([function(){return e.expandedKeys},function(){return e.autoExpandParent},x],function(h,d){var u=Ae(h,2);u[0];var c=u[1],T=Ae(d,2);T[0];var P=T[1],D=m.value;if(e.expandedKeys!==void 0||H&&c!==P)D=e.autoExpandParent||!H&&e.defaultExpandParent?kn(e.expandedKeys,x.value):e.expandedKeys;else if(!H&&e.defaultExpandAll){var C=B({},x.value);delete C[Oe],D=Object.keys(C).map(function(O){return C[O].key})}else!H&&e.defaultExpandedKeys&&(D=e.autoExpandParent||e.defaultExpandParent?kn(e.defaultExpandedKeys,x.value):e.defaultExpandedKeys);D&&(m.value=D),H=!0},{immediate:!0});var q=z([]);Ne(function(){q.value=Aa(k.value,m.value,$.value)}),Ne(function(){e.selectable&&(e.selectedKeys!==void 0?v.value=bn(e.selectedKeys,e):!H&&e.defaultSelectedKeys&&(v.value=bn(e.defaultSelectedKeys,e)))});var ue=Ra(x),he=ue.maxLevel,ve=ue.levelEntities;Ne(function(){if(e.checkable){var h;if(e.checkedKeys!==void 0?h=ln(e.checkedKeys)||{}:!H&&e.defaultCheckedKeys?h=ln(e.defaultCheckedKeys)||{}:k.value&&(h=ln(e.checkedKeys)||{checkedKeys:N.value,halfCheckedKeys:b.value}),h){var d=h,u=d.checkedKeys,c=u===void 0?[]:u,T=d.halfCheckedKeys,P=T===void 0?[]:T;if(!e.checkStrictly){var D=dn(c,!0,x.value,he.value,ve.value);c=D.checkedKeys,P=D.halfCheckedKeys}N.value=c,b.value=P}}}),Ne(function(){e.loadedKeys&&(y.value=e.loadedKeys)});var Z=function(){B(i,{dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})},se=function(d){ne.value.scrollTo(d)};Ee(function(){return e.activeKey},function(){e.activeKey!==void 0&&(j.value=e.activeKey)},{immediate:!0}),Ee(j,function(h){Ln(function(){h!==null&&se({key:h})})},{immediate:!0,flush:"post"});var be=function(d){e.expandedKeys===void 0&&(m.value=d)},_e=function(){i.draggingNodeKey!==null&&B(i,{draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),R=null,Q=null},Le=function(d,u){var c=e.onDragend;i.dragOverNodeKey=null,_e(),c==null||c({event:d,node:u.eventData}),L=null},je=function h(d){Le(d,null),window.removeEventListener("dragend",h)},Ye=function(d,u){var c=e.onDragstart,T=u.eventKey,P=u.eventData;L=u,R={x:d.clientX,y:d.clientY};var D=xe(m.value,T);i.draggingNodeKey=T,i.dragChildrenKeys=wa(T,x.value),p.value=ne.value.getIndentWidth(),be(D),window.addEventListener("dragend",je),c&&c({event:d,node:P})},Ue=function(d,u){var c=e.onDragenter,T=e.onExpand,P=e.allowDrop,D=e.direction,C=u.pos,O=u.eventKey;if(Q!==O&&(Q=O),!L){Z();return}var A=Kn(d,L,u,p.value,R,P,q.value,x.value,W.value,D),G=A.dropPosition,V=A.dropLevelOffset,X=A.dropTargetKey,J=A.dropContainerKey,ee=A.dropTargetPos,ce=A.dropAllowed,le=A.dragOverNodeKey;if(i.dragChildrenKeys.indexOf(X)!==-1||!ce){Z();return}if(l||(l={}),Object.keys(l).forEach(function(Y){clearTimeout(l[Y])}),L.eventKey!==u.eventKey&&(l[C]=window.setTimeout(function(){if(i.draggingNodeKey!==null){var Y=m.value.slice(),ge=x.value[u.eventKey];ge&&(ge.children||[]).length&&(Y=Se(m.value,u.eventKey)),be(Y),T&&T(Y,{node:u.eventData,expanded:!0,nativeEvent:d})}},800)),L.eventKey===X&&V===0){Z();return}B(i,{dragOverNodeKey:le,dropPosition:G,dropLevelOffset:V,dropTargetKey:X,dropContainerKey:J,dropTargetPos:ee,dropAllowed:ce}),c&&c({event:d,node:u.eventData,expandedKeys:m.value})},Xe=function(d,u){var c=e.onDragover,T=e.allowDrop,P=e.direction;if(!!L){var D=Kn(d,L,u,p.value,R,T,q.value,x.value,W.value,P),C=D.dropPosition,O=D.dropLevelOffset,A=D.dropTargetKey,G=D.dropContainerKey,V=D.dropAllowed,X=D.dropTargetPos,J=D.dragOverNodeKey;i.dragChildrenKeys.indexOf(A)!==-1||!V||(L.eventKey===A&&O===0?i.dropPosition===null&&i.dropLevelOffset===null&&i.dropTargetKey===null&&i.dropContainerKey===null&&i.dropTargetPos===null&&i.dropAllowed===!1&&i.dragOverNodeKey===null||Z():C===i.dropPosition&&O===i.dropLevelOffset&&A===i.dropTargetKey&&G===i.dropContainerKey&&X===i.dropTargetPos&&V===i.dropAllowed&&J===i.dragOverNodeKey||B(i,{dropPosition:C,dropLevelOffset:O,dropTargetKey:A,dropContainerKey:G,dropTargetPos:X,dropAllowed:V,dragOverNodeKey:J}),c&&c({event:d,node:u.eventData}))}},qe=function(d,u){Q===u.eventKey&&!d.currentTarget.contains(d.relatedTarget)&&(Z(),Q=null);var c=e.onDragleave;c&&c({event:d,node:u.eventData})},ze=function(d,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,T,P=i.dragChildrenKeys,D=i.dropPosition,C=i.dropTargetKey,O=i.dropTargetPos,A=i.dropAllowed;if(!!A){var G=e.onDrop;if(i.dragOverNodeKey=null,_e(),C!==null){var V=B(B({},un(C,on(de.value))),{active:((T=K.value)===null||T===void 0?void 0:T.key)===C,data:x.value[C].node});P.indexOf(C);var X=fn(O),J={event:d,node:cn(V),dragNode:L?L.eventData:null,dragNodesKeys:[L.eventKey].concat(P),dropToGap:D!==0,dropPosition:D+Number(X[X.length-1])};c||G==null||G(J),L=null}}},Qe=function(d,u){var c=e.onClick;c&&c(d,u)},Ze=function(d,u){var c=e.onDblclick;c&&c(d,u)},Be=function(d,u){var c=v.value,T=e.onSelect,P=e.multiple,D=u.selected,C=u[$.value.key],O=!D;O?P?c=Se(c,C):c=[C]:c=xe(c,C);var A=x.value,G=c.map(function(V){var X=A[V];return X?X.node:null}).filter(function(V){return V});e.selectedKeys===void 0&&(v.value=c),T&&T(c,{event:"select",selected:O,node:u,selectedNodes:G,nativeEvent:d})},Re=function(d,u,c){var T=e.checkStrictly,P=e.onCheck,D=u[$.value.key],C,O={event:"check",node:u,checked:c,nativeEvent:d},A=x.value;if(T){var G=c?Se(N.value,D):xe(N.value,D),V=xe(b.value,D);C={checked:G,halfChecked:V},O.checkedNodes=G.map(function(Y){return A[Y]}).filter(function(Y){return Y}).map(function(Y){return Y.node}),e.checkedKeys===void 0&&(N.value=G)}else{var X=dn([].concat(Te(N.value),[D]),!0,A,he.value,ve.value),J=X.checkedKeys,ee=X.halfCheckedKeys;if(!c){var ce=new Set(J);ce.delete(D);var le=dn(Array.from(ce),{checked:!1,halfCheckedKeys:ee},A,he.value,ve.value);J=le.checkedKeys,ee=le.halfCheckedKeys}C=J,O.checkedNodes=[],O.checkedNodesPositions=[],O.halfCheckedKeys=ee,J.forEach(function(Y){var ge=A[Y];if(!!ge){var pe=ge.node,me=ge.pos;O.checkedNodes.push(pe),O.checkedNodesPositions.push({node:pe,pos:me})}}),e.checkedKeys===void 0&&(N.value=J,b.value=ee)}P&&P(C,O)},Ge=function(d){var u=d[$.value.key],c=new Promise(function(T,P){var D=e.loadData,C=e.onLoad;if(!D||ae.value.has(u)||re.value.has(u))return null;var O=D(d);O.then(function(){var A=Se(y.value,u),G=xe(S.value,u);C&&C(A,{event:"load",node:d}),e.loadedKeys===void 0&&(y.value=A),S.value=G,T()}).catch(function(A){var G=xe(S.value,u);if(S.value=G,E[u]=(E[u]||0)+1,E[u]>=Ua){var V=Se(y.value,u);e.loadedKeys===void 0&&(y.value=V),T()}P(A)}),S.value=Se(S.value,u)});return c.catch(function(){}),c},Je=function(d,u){var c=e.onMouseenter;c&&c({event:d,node:u})},en=function(d,u){var c=e.onMouseleave;c&&c({event:d,node:u})},nn=function(d,u){var c=e.onRightClick;c&&(d.preventDefault(),c({event:d,node:u}))},$e=function(d){var u=e.onFocus;w.value=!0,u&&u(d)},an=function(d){var u=e.onBlur;w.value=!1,ke(null),u&&u(d)},we=function(d,u){var c=m.value,T=e.onExpand,P=e.loadData,D=u.expanded,C=u[$.value.key];if(!F.value){c.indexOf(C);var O=!D;if(O?c=Se(c,C):c=xe(c,C),be(c),T&&T(c,{node:u,expanded:O,nativeEvent:d}),O&&P){var A=Ge(u);A&&A.then(function(){}).catch(function(G){var V=xe(m.value,C);be(V),Promise.reject(G)})}}},He=function(){F.value=!0},tn=function(){setTimeout(function(){F.value=!1})},ke=function(d){var u=e.onActiveChange;j.value!==d&&(e.activeKey!==void 0&&(j.value=d),d!==null&&se({key:d}),u&&u(d))},K=M(function(){return j.value===null?null:q.value.find(function(h){var d=h.key;return d===j.value})||null}),o=function(d){var u=q.value.findIndex(function(P){var D=P.key;return D===j.value});u===-1&&d<0&&(u=q.value.length),u=(u+d+q.value.length)%q.value.length;var c=q.value[u];if(c){var T=c.key;ke(T)}else ke(null)},s=M(function(){return cn(B(B({},un(j.value,de.value)),{data:K.value.data,active:!0}))}),I=function(d){var u=e.onKeydown,c=e.checkable,T=e.selectable;switch(d.which){case Pe.UP:{o(-1),d.preventDefault();break}case Pe.DOWN:{o(1),d.preventDefault();break}}var P=K.value;if(P&&P.data){var D=P.data.isLeaf===!1||!!(P.data.children||[]).length,C=s.value;switch(d.which){case Pe.LEFT:{D&&W.value.has(j.value)?we({},C):P.parent&&ke(P.parent.key),d.preventDefault();break}case Pe.RIGHT:{D&&!W.value.has(j.value)?we({},C):P.children&&P.children.length&&ke(P.children[0].key),d.preventDefault();break}case Pe.ENTER:case Pe.SPACE:{c&&!C.disabled&&C.checkable!==!1&&!C.disableCheckbox?Re({},C,!oe.value.has(j.value)):!c&&T&&!C.disabled&&C.selectable!==!1&&Be({},C);break}}}u&&u(d)};return g({onNodeExpand:we,scrollTo:se,onKeydown:I,selectedKeys:M(function(){return v.value}),checkedKeys:M(function(){return N.value}),halfCheckedKeys:M(function(){return b.value}),loadedKeys:M(function(){return y.value}),loadingKeys:M(function(){return S.value}),expandedKeys:M(function(){return m.value})}),ca(function(){window.removeEventListener("dragend",je),f.value=!0}),ma({expandedKeys:m,selectedKeys:v,loadedKeys:y,loadingKeys:S,checkedKeys:N,halfCheckedKeys:b,expandedKeysSet:W,selectedKeysSet:te,loadedKeysSet:ae,loadingKeysSet:re,checkedKeysSet:oe,halfCheckedKeysSet:ye,flattenNodes:q}),function(){var h,d=i.draggingNodeKey,u=i.dropLevelOffset,c=i.dropContainerKey,T=i.dropTargetKey,P=i.dropPosition,D=i.dragOverNodeKey,C=e.prefixCls,O=e.showLine,A=e.focusable,G=e.tabindex,V=G===void 0?0:G,X=e.selectable,J=e.showIcon,ee=e.icon,ce=ee===void 0?t.icon:ee,le=e.switcherIcon,Y=e.draggable,ge=e.checkable,pe=e.checkStrictly,me=e.disabled,Ve=e.motion,rn=e.loadData,$n=e.filterTreeNode,Hn=e.height,Vn=e.itemHeight,Wn=e.virtual,Yn=e.dropIndicatorRender,Un=e.onContextmenu,Xn=e.onScroll,qn=e.direction,zn=a.class,Qn=a.style,Zn=An(B(B({},e),a),{aria:!0,data:!0}),We;return Y&&(Ie(Y)==="object"?We=Y:typeof Y=="function"?We={nodeDraggable:Y}:We={}),_(ka,{value:{prefixCls:C,selectable:X,showIcon:J,icon:ce,switcherIcon:le,draggable:We,draggingNodeKey:d,checkable:ge,customCheckable:t.checkable,checkStrictly:pe,disabled:me,keyEntities:x.value,dropLevelOffset:u,dropContainerKey:c,dropTargetKey:T,dropPosition:P,dragOverNodeKey:D,dragging:d!==null,indent:p.value,direction:qn,dropIndicatorRender:Yn,loadData:rn,filterTreeNode:$n,onNodeClick:Qe,onNodeDoubleClick:Ze,onNodeExpand:we,onNodeSelect:Be,onNodeCheck:Re,onNodeLoad:Ge,onNodeMouseEnter:Je,onNodeMouseLeave:en,onNodeContextMenu:nn,onNodeDragStart:Ye,onNodeDragEnter:Ue,onNodeDragOver:Xe,onNodeDragLeave:qe,onNodeDragEnd:Le,onNodeDrop:ze,slots:t}},{default:function(){return[_("div",{role:"tree",class:Ce(C,zn,(h={},U(h,"".concat(C,"-show-line"),O),U(h,"".concat(C,"-focused"),w.value),U(h,"".concat(C,"-active-focused"),j.value!==null),h))},[_(Wa,fe({ref:ne,prefixCls:C,style:Qn,disabled:me,selectable:X,checkable:!!ge,motion:Ve,height:Hn,itemHeight:Vn,virtual:Wn,focusable:A,focused:w.value,tabindex:V,activeItem:K.value,onFocus:$e,onBlur:an,onKeydown:I,onActiveChange:ke,onListChangeStart:He,onListChangeEnd:tn,onContextmenu:Un,onScroll:Xn},Zn),null)])]}})}}});function et(n,e,r,a){var t=a.isLeaf,g=a.expanded,f=a.loading,l=e;if(f)return _(va,{class:"".concat(n,"-switcher-loading-icon")},null);var p;r&&Ie(r)==="object"&&(p=r.showLeafIcon);var v=null,N="".concat(n,"-switcher-icon");return t?(r&&(Ie(r)==="object"&&!p?v=_("span",{class:"".concat(n,"-switcher-leaf-line")},null):v=_(sa,{class:"".concat(n,"-switcher-line-icon")},null)),v):(v=_(fa,{class:N},null),r&&(v=g?_(ya,{class:"".concat(n,"-switcher-line-icon")},null):_(ha,{class:"".concat(n,"-switcher-line-icon")},null)),typeof e=="function"?l=e(B(B({},a),{defaultIcon:v,switcherCls:N})):ga(l)&&(l=pa(l,{class:N})),l||v)}export{Ja as T,pn as V,dn as a,xe as b,Fa as c,Se as d,Ke as e,Ia as f,yn as g,kn as h,jn as i,et as r,Na as t,Ra as u};
